{"ast":null,"code":"var _jsxFileName = \"/Users/shirokiy/Desktop/Repositories/\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u044B/ClientExp/client_exp-frontend/src/pages/Survey/SurveyPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport { surveyService } from \"../../api/survey\";\nimport { authService } from \"../../api/auth\";\nimport \"./SurveyStyles.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SurveyPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [isPreview, setIsPreview] = useState(false);\n  const [survey, setSurvey] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answers, setAnswers] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [respondentData, setRespondentData] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    consent: false\n  });\n  useEffect(() => {\n    // Проверяем, является ли это предпросмотром от администратора\n    const checkIfPreview = async () => {\n      const user = authService.getCurrentUser();\n      const isAdmin = user && (user.role === \"ADMIN\" || user.role === \"MANAGER\");\n      setIsPreview(isAdmin);\n      fetchSurvey(isAdmin);\n    };\n    checkIfPreview();\n  }, [id]);\n  const fetchSurvey = async isAdmin => {\n    try {\n      setLoading(true);\n\n      // Выбор метода API в зависимости от того, предпросмотр это или нет\n      let surveyData;\n\n      // Если это предпросмотр администратора, используем метод с авторизацией\n      if (isAdmin) {\n        surveyData = await surveyService.getSurveyById(id);\n      } else {\n        surveyData = await surveyService.getPublicSurveyById(id);\n      }\n      console.log(\"Получены данные опросника:\", surveyData);\n      if (!surveyData) {\n        setError(\"Опросник не найден или недоступен\");\n        setLoading(false);\n        return;\n      }\n\n      // Проверка статуса нужна только если это не предпросмотр\n      if (!isAdmin && surveyData.status !== \"ACTIVE\" && surveyData.status !== \"активный\") {\n        setError(`Опросник в данный момент недоступен (статус: ${surveyData.status})`);\n        setLoading(false);\n        return;\n      }\n      setSurvey(surveyData);\n\n      // Инициализируем ответы для обязательных вопросов\n      const initialAnswers = {};\n      surveyData.questions.forEach(question => {\n        if (question.required) {\n          initialAnswers[question.id] = question.type === \"MULTIPLE_CHOICE\" ? [] : question.type === \"TEXT\" ? \"\" : null;\n        }\n      });\n      setAnswers(initialAnswers);\n      setLoading(false);\n    } catch (err) {\n      console.error(\"Ошибка при загрузке опросника:\", err);\n      setError(\"Не удалось загрузить опросник. Возможно, он был удален или недоступен.\");\n      setLoading(false);\n    }\n  };\n  const handleAnswerChange = (questionId, value) => {\n    const question = survey.questions.find(q => q.id === questionId);\n    if (question.type === \"MULTIPLE_CHOICE\") {\n      const currentAnswers = answers[questionId] || [];\n      if (currentAnswers.includes(value)) {\n        // Если значение уже выбрано, удаляем его\n        setAnswers({\n          ...answers,\n          [questionId]: currentAnswers.filter(item => item !== value)\n        });\n      } else {\n        // Иначе добавляем новое значение\n        setAnswers({\n          ...answers,\n          [questionId]: [...currentAnswers, value]\n        });\n      }\n    } else {\n      // Для одиночного выбора, текста и оценки\n      setAnswers({\n        ...answers,\n        [questionId]: value\n      });\n    }\n  };\n  const handleRespondentDataChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setRespondentData({\n      ...respondentData,\n      [name]: type === \"checkbox\" ? checked : value\n    });\n  };\n  const nextQuestion = () => {\n    const currentQuestion = survey.questions[currentQuestionIndex];\n\n    // Проверяем, дан ли ответ на обязательный вопрос\n    if (currentQuestion.required) {\n      const answer = answers[currentQuestion.id];\n      if (answer === null || answer === undefined || Array.isArray(answer) && answer.length === 0 || typeof answer === \"string\" && answer.trim() === \"\") {\n        alert(\"Пожалуйста, ответьте на вопрос, прежде чем продолжить.\");\n        return;\n      }\n    }\n    if (currentQuestionIndex < survey.questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n      window.scrollTo(0, 0);\n    }\n  };\n  const prevQuestion = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\n      window.scrollTo(0, 0);\n    }\n  };\n  const validateForm = () => {\n    // Проверяем, есть ли ответы на все обязательные вопросы\n    const unansweredRequired = survey.questions.filter(q => q.required).some(q => {\n      const answer = answers[q.id];\n      return answer === null || answer === undefined || Array.isArray(answer) && answer.length === 0 || typeof answer === \"string\" && answer.trim() === \"\";\n    });\n    if (unansweredRequired) {\n      alert(\"Пожалуйста, ответьте на все обязательные вопросы.\");\n      return false;\n    }\n\n    // Проверяем данные респондента\n    if (!respondentData.consent) {\n      alert(\"Пожалуйста, дайте согласие на обработку данных.\");\n      return false;\n    }\n    return true;\n  };\n  const submitSurvey = async () => {\n    if (!validateForm()) return;\n    try {\n      setSubmitting(true);\n      const surveyResponse = {\n        surveyId: survey.id,\n        respondent: respondentData,\n        answers: Object.entries(answers).map(([questionId, value]) => ({\n          questionId: parseInt(questionId),\n          answer: value\n        }))\n      };\n      await surveyService.submitSurveyResponse(surveyResponse);\n      setSubmitted(true);\n      window.scrollTo(0, 0);\n    } catch (err) {\n      console.error(\"Ошибка при отправке ответов:\", err);\n      alert(\"Произошла ошибка при отправке ответов. Пожалуйста, попробуйте еще раз.\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const renderQuestionContent = question => {\n    switch (question.type) {\n      case \"SINGLE_CHOICE\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-options\",\n          children: question.options.map((option, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"option-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: `question_${question.id}`,\n              value: option,\n              checked: answers[question.id] === option,\n              onChange: () => handleAnswerChange(question.id, option)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: option\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this);\n      case \"MULTIPLE_CHOICE\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-options\",\n          children: question.options.map((option, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"option-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: `question_${question.id}_${index}`,\n              value: option,\n              checked: (answers[question.id] || []).includes(option),\n              onChange: () => handleAnswerChange(question.id, option)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: option\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this);\n      case \"TEXT\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-text\",\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"text-answer\",\n            value: answers[question.id] || \"\",\n            onChange: e => handleAnswerChange(question.id, e.target.value),\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043E\\u0442\\u0432\\u0435\\u0442 \\u0437\\u0434\\u0435\\u0441\\u044C...\",\n            rows: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this);\n      case \"RATING\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rating-container\",\n          children: [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(rating => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `rating-button ${answers[question.id] === rating ? \"selected\" : \"\"}`,\n            onClick: () => handleAnswerChange(question.id, rating),\n            children: rating\n          }, rating, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rating-labels\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u041E\\u0447\\u0435\\u043D\\u044C \\u043F\\u043B\\u043E\\u0445\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u041E\\u0442\\u043B\\u0438\\u0447\\u043D\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u0435\\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u043C\\u044B\\u0439 \\u0442\\u0438\\u043F \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u0430.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"survey-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-indicator\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"survey-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: () => navigate(\"/\"),\n          children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this);\n  }\n  if (!survey) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"survey-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u041E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: () => navigate(\"/\"),\n          children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 7\n    }, this);\n  }\n  if (submitted) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"survey-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0421\\u043F\\u0430\\u0441\\u0438\\u0431\\u043E \\u0437\\u0430 \\u0443\\u0447\\u0430\\u0441\\u0442\\u0438\\u0435 \\u0432 \\u043E\\u043F\\u0440\\u043E\\u0441\\u0435!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0412\\u0430\\u0448\\u0438 \\u043E\\u0442\\u0432\\u0435\\u0442\\u044B \\u043F\\u043E\\u043C\\u043E\\u0433\\u0443\\u0442 \\u043D\\u0430\\u043C \\u0443\\u043B\\u0443\\u0447\\u0448\\u0438\\u0442\\u044C \\u043D\\u0430\\u0448 \\u0441\\u0435\\u0440\\u0432\\u0438\\u0441.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-button\",\n          onClick: () => navigate(\"/\"),\n          children: \"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this);\n  }\n  const currentQuestion = survey.questions[currentQuestionIndex];\n  const isLastQuestion = currentQuestionIndex === survey.questions.length - 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"survey-container\",\n    children: [isPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview-notification\",\n      children: [\"\\u0412\\u044B \\u043F\\u0440\\u043E\\u0441\\u043C\\u0430\\u0442\\u0440\\u0438\\u0432\\u0430\\u0435\\u0442\\u0435 \\u043E\\u043F\\u0440\\u043E\\u0441 \\u0432 \\u0440\\u0435\\u0436\\u0438\\u043C\\u0435 \\u043F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430\", /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-to-dashboard\",\n        onClick: () => navigate(\"/dashboard\"),\n        children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u0432 \\u043F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"survey-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: survey.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), survey.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"survey-description\",\n        children: survey.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"survey-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-fill\",\n          style: {\n            width: `${(currentQuestionIndex + 1) / survey.questions.length * 100}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-text\",\n        children: [\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 \", currentQuestionIndex + 1, \" \\u0438\\u0437 \", survey.questions.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"question-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"question-text\",\n          children: [currentQuestion.text, currentQuestion.required && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"required-mark\",\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), renderQuestionContent(currentQuestion)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), isLastQuestion && !isPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"respondent-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"form-note\",\n          children: \"\\u042D\\u0442\\u0430 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043F\\u043E\\u043C\\u043E\\u0436\\u0435\\u0442 \\u043D\\u0430\\u043C \\u0441\\u0432\\u044F\\u0437\\u0430\\u0442\\u044C\\u0441\\u044F \\u0441 \\u0432\\u0430\\u043C\\u0438 \\u043F\\u0440\\u0438 \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E\\u0441\\u0442\\u0438.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"\\u0412\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"name\",\n            name: \"name\",\n            value: respondentData.name,\n            onChange: handleRespondentDataChange,\n            placeholder: \"\\u0418\\u0432\\u0430\\u043D\\u043E\\u0432 \\u0418\\u0432\\u0430\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            value: respondentData.email,\n            onChange: handleRespondentDataChange,\n            placeholder: \"example@mail.ru\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"phone\",\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            id: \"phone\",\n            name: \"phone\",\n            value: respondentData.phone,\n            onChange: handleRespondentDataChange,\n            placeholder: \"+7 (XXX) XXX-XX-XX\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group checkbox-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: \"consent\",\n            name: \"consent\",\n            checked: respondentData.consent,\n            onChange: handleRespondentDataChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"consent\",\n            children: [\"\\u042F \\u0434\\u0430\\u044E \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0435 \\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0443 \\u043C\\u043E\\u0438\\u0445 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"required-mark\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navigation-buttons\",\n        children: [currentQuestionIndex > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"secondary-button\",\n          onClick: prevQuestion,\n          children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 13\n        }, this), !isLastQuestion ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-button\",\n          onClick: nextQuestion,\n          children: \"\\u0414\\u0430\\u043B\\u0435\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: isPreview ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button\",\n            onClick: () => navigate(\"/dashboard\"),\n            children: \"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u043F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button\",\n            onClick: submitSurvey,\n            disabled: submitting,\n            children: submitting ? \"Отправка...\" : \"Завершить опрос\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 352,\n    columnNumber: 5\n  }, this);\n};\n_s(SurveyPage, \"PEgVVn8kjNI1Yxz0UdPX6/lIL5s=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = SurveyPage;\nexport default SurveyPage;\nvar _c;\n$RefreshReg$(_c, \"SurveyPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useLocation","surveyService","authService","jsxDEV","_jsxDEV","Fragment","_Fragment","SurveyPage","_s","id","navigate","location","isPreview","setIsPreview","survey","setSurvey","loading","setLoading","error","setError","currentQuestionIndex","setCurrentQuestionIndex","answers","setAnswers","submitting","setSubmitting","submitted","setSubmitted","respondentData","setRespondentData","name","email","phone","consent","checkIfPreview","user","getCurrentUser","isAdmin","role","fetchSurvey","surveyData","getSurveyById","getPublicSurveyById","console","log","status","initialAnswers","questions","forEach","question","required","type","err","handleAnswerChange","questionId","value","find","q","currentAnswers","includes","filter","item","handleRespondentDataChange","e","checked","target","nextQuestion","currentQuestion","answer","undefined","Array","isArray","length","trim","alert","window","scrollTo","prevQuestion","validateForm","unansweredRequired","some","submitSurvey","surveyResponse","surveyId","respondent","Object","entries","map","parseInt","submitSurveyResponse","renderQuestionContent","className","children","options","option","index","onChange","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","rows","rating","onClick","isLastQuestion","title","description","style","width","text","htmlFor","disabled","_c","$RefreshReg$"],"sources":["/Users/shirokiy/Desktop/Repositories/Дипломы/ClientExp/client_exp-frontend/src/pages/Survey/SurveyPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\"\nimport { surveyService } from \"../../api/survey\"\nimport { authService } from \"../../api/auth\"\nimport \"./SurveyStyles.css\"\n\nconst SurveyPage = () => {\n  const { id } = useParams()\n  const navigate = useNavigate()\n  const location = useLocation()\n  const [isPreview, setIsPreview] = useState(false)\n\n  const [survey, setSurvey] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)\n  const [answers, setAnswers] = useState({})\n  const [submitting, setSubmitting] = useState(false)\n  const [submitted, setSubmitted] = useState(false)\n  const [respondentData, setRespondentData] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    consent: false,\n  })\n\n  useEffect(() => {\n    // Проверяем, является ли это предпросмотром от администратора\n    const checkIfPreview = async () => {\n      const user = authService.getCurrentUser()\n      const isAdmin = user && (user.role === \"ADMIN\" || user.role === \"MANAGER\")\n      setIsPreview(isAdmin)\n      fetchSurvey(isAdmin)\n    }\n\n    checkIfPreview()\n  }, [id])\n\n  const fetchSurvey = async isAdmin => {\n    try {\n      setLoading(true)\n\n      // Выбор метода API в зависимости от того, предпросмотр это или нет\n      let surveyData\n\n      // Если это предпросмотр администратора, используем метод с авторизацией\n      if (isAdmin) {\n        surveyData = await surveyService.getSurveyById(id)\n      } else {\n        surveyData = await surveyService.getPublicSurveyById(id)\n      }\n\n      console.log(\"Получены данные опросника:\", surveyData)\n\n      if (!surveyData) {\n        setError(\"Опросник не найден или недоступен\")\n        setLoading(false)\n        return\n      }\n\n      // Проверка статуса нужна только если это не предпросмотр\n      if (\n        !isAdmin &&\n        surveyData.status !== \"ACTIVE\" &&\n        surveyData.status !== \"активный\"\n      ) {\n        setError(\n          `Опросник в данный момент недоступен (статус: ${surveyData.status})`\n        )\n        setLoading(false)\n        return\n      }\n\n      setSurvey(surveyData)\n\n      // Инициализируем ответы для обязательных вопросов\n      const initialAnswers = {}\n      surveyData.questions.forEach(question => {\n        if (question.required) {\n          initialAnswers[question.id] =\n            question.type === \"MULTIPLE_CHOICE\"\n              ? []\n              : question.type === \"TEXT\"\n              ? \"\"\n              : null\n        }\n      })\n      setAnswers(initialAnswers)\n\n      setLoading(false)\n    } catch (err) {\n      console.error(\"Ошибка при загрузке опросника:\", err)\n      setError(\n        \"Не удалось загрузить опросник. Возможно, он был удален или недоступен.\"\n      )\n      setLoading(false)\n    }\n  }\n\n  const handleAnswerChange = (questionId, value) => {\n    const question = survey.questions.find(q => q.id === questionId)\n\n    if (question.type === \"MULTIPLE_CHOICE\") {\n      const currentAnswers = answers[questionId] || []\n\n      if (currentAnswers.includes(value)) {\n        // Если значение уже выбрано, удаляем его\n        setAnswers({\n          ...answers,\n          [questionId]: currentAnswers.filter(item => item !== value),\n        })\n      } else {\n        // Иначе добавляем новое значение\n        setAnswers({\n          ...answers,\n          [questionId]: [...currentAnswers, value],\n        })\n      }\n    } else {\n      // Для одиночного выбора, текста и оценки\n      setAnswers({\n        ...answers,\n        [questionId]: value,\n      })\n    }\n  }\n\n  const handleRespondentDataChange = e => {\n    const { name, value, type, checked } = e.target\n    setRespondentData({\n      ...respondentData,\n      [name]: type === \"checkbox\" ? checked : value,\n    })\n  }\n\n  const nextQuestion = () => {\n    const currentQuestion = survey.questions[currentQuestionIndex]\n\n    // Проверяем, дан ли ответ на обязательный вопрос\n    if (currentQuestion.required) {\n      const answer = answers[currentQuestion.id]\n      if (\n        answer === null ||\n        answer === undefined ||\n        (Array.isArray(answer) && answer.length === 0) ||\n        (typeof answer === \"string\" && answer.trim() === \"\")\n      ) {\n        alert(\"Пожалуйста, ответьте на вопрос, прежде чем продолжить.\")\n        return\n      }\n    }\n\n    if (currentQuestionIndex < survey.questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1)\n      window.scrollTo(0, 0)\n    }\n  }\n\n  const prevQuestion = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1)\n      window.scrollTo(0, 0)\n    }\n  }\n\n  const validateForm = () => {\n    // Проверяем, есть ли ответы на все обязательные вопросы\n    const unansweredRequired = survey.questions\n      .filter(q => q.required)\n      .some(q => {\n        const answer = answers[q.id]\n        return (\n          answer === null ||\n          answer === undefined ||\n          (Array.isArray(answer) && answer.length === 0) ||\n          (typeof answer === \"string\" && answer.trim() === \"\")\n        )\n      })\n\n    if (unansweredRequired) {\n      alert(\"Пожалуйста, ответьте на все обязательные вопросы.\")\n      return false\n    }\n\n    // Проверяем данные респондента\n    if (!respondentData.consent) {\n      alert(\"Пожалуйста, дайте согласие на обработку данных.\")\n      return false\n    }\n\n    return true\n  }\n\n  const submitSurvey = async () => {\n    if (!validateForm()) return\n\n    try {\n      setSubmitting(true)\n\n      const surveyResponse = {\n        surveyId: survey.id,\n        respondent: respondentData,\n        answers: Object.entries(answers).map(([questionId, value]) => ({\n          questionId: parseInt(questionId),\n          answer: value,\n        })),\n      }\n\n      await surveyService.submitSurveyResponse(surveyResponse)\n      setSubmitted(true)\n      window.scrollTo(0, 0)\n    } catch (err) {\n      console.error(\"Ошибка при отправке ответов:\", err)\n      alert(\n        \"Произошла ошибка при отправке ответов. Пожалуйста, попробуйте еще раз.\"\n      )\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const renderQuestionContent = question => {\n    switch (question.type) {\n      case \"SINGLE_CHOICE\":\n        return (\n          <div className=\"question-options\">\n            {question.options.map((option, index) => (\n              <label key={index} className=\"option-label\">\n                <input\n                  type=\"radio\"\n                  name={`question_${question.id}`}\n                  value={option}\n                  checked={answers[question.id] === option}\n                  onChange={() => handleAnswerChange(question.id, option)}\n                />\n                <span>{option}</span>\n              </label>\n            ))}\n          </div>\n        )\n\n      case \"MULTIPLE_CHOICE\":\n        return (\n          <div className=\"question-options\">\n            {question.options.map((option, index) => (\n              <label key={index} className=\"option-label\">\n                <input\n                  type=\"checkbox\"\n                  name={`question_${question.id}_${index}`}\n                  value={option}\n                  checked={(answers[question.id] || []).includes(option)}\n                  onChange={() => handleAnswerChange(question.id, option)}\n                />\n                <span>{option}</span>\n              </label>\n            ))}\n          </div>\n        )\n\n      case \"TEXT\":\n        return (\n          <div className=\"question-text\">\n            <textarea\n              className=\"text-answer\"\n              value={answers[question.id] || \"\"}\n              onChange={e => handleAnswerChange(question.id, e.target.value)}\n              placeholder=\"Введите ваш ответ здесь...\"\n              rows={5}\n            />\n          </div>\n        )\n\n      case \"RATING\":\n        return (\n          <div className=\"rating-container\">\n            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(rating => (\n              <button\n                key={rating}\n                className={`rating-button ${\n                  answers[question.id] === rating ? \"selected\" : \"\"\n                }`}\n                onClick={() => handleAnswerChange(question.id, rating)}\n              >\n                {rating}\n              </button>\n            ))}\n            <div className=\"rating-labels\">\n              <span>Очень плохо</span>\n              <span>Отлично</span>\n            </div>\n          </div>\n        )\n\n      default:\n        return <p>Неподдерживаемый тип вопроса.</p>\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"loading-indicator\">Загрузка опросника...</div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"error-message\">\n          <h2>Ошибка</h2>\n          <p>{error}</p>\n          <button className=\"back-button\" onClick={() => navigate(\"/\")}>\n            Вернуться на главную\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  if (!survey) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"error-message\">\n          <h2>Опросник не найден</h2>\n          <button className=\"back-button\" onClick={() => navigate(\"/\")}>\n            Вернуться на главную\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  if (submitted) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"success-message\">\n          <h2>Спасибо за участие в опросе!</h2>\n          <p>Ваши ответы помогут нам улучшить наш сервис.</p>\n          <button className=\"primary-button\" onClick={() => navigate(\"/\")}>\n            На главную\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  const currentQuestion = survey.questions[currentQuestionIndex]\n  const isLastQuestion = currentQuestionIndex === survey.questions.length - 1\n\n  return (\n    <div className=\"survey-container\">\n      {isPreview && (\n        <div className=\"preview-notification\">\n          Вы просматриваете опрос в режиме предпросмотра\n          <button\n            className=\"back-to-dashboard\"\n            onClick={() => navigate(\"/dashboard\")}\n          >\n            Вернуться в панель управления\n          </button>\n        </div>\n      )}\n\n      <header className=\"survey-header\">\n        <h1>{survey.title}</h1>\n        {survey.description && (\n          <p className=\"survey-description\">{survey.description}</p>\n        )}\n      </header>\n\n      <main className=\"survey-content\">\n        <div className=\"progress-bar\">\n          <div\n            className=\"progress-fill\"\n            style={{\n              width: `${\n                ((currentQuestionIndex + 1) / survey.questions.length) * 100\n              }%`,\n            }}\n          ></div>\n        </div>\n        <div className=\"progress-text\">\n          Вопрос {currentQuestionIndex + 1} из {survey.questions.length}\n        </div>\n\n        <div className=\"question-card\">\n          <h2 className=\"question-text\">\n            {currentQuestion.text}\n            {currentQuestion.required && (\n              <span className=\"required-mark\">*</span>\n            )}\n          </h2>\n\n          {renderQuestionContent(currentQuestion)}\n        </div>\n\n        {isLastQuestion && !isPreview && (\n          <div className=\"respondent-form\">\n            <h3>Контактная информация</h3>\n            <p className=\"form-note\">\n              Эта информация поможет нам связаться с вами при необходимости.\n            </p>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"name\">Ваше имя:</label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={respondentData.name}\n                onChange={handleRespondentDataChange}\n                placeholder=\"Иванов Иван\"\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email\">Email:</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={respondentData.email}\n                onChange={handleRespondentDataChange}\n                placeholder=\"example@mail.ru\"\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"phone\">Телефон:</label>\n              <input\n                type=\"tel\"\n                id=\"phone\"\n                name=\"phone\"\n                value={respondentData.phone}\n                onChange={handleRespondentDataChange}\n                placeholder=\"+7 (XXX) XXX-XX-XX\"\n              />\n            </div>\n\n            <div className=\"form-group checkbox-group\">\n              <input\n                type=\"checkbox\"\n                id=\"consent\"\n                name=\"consent\"\n                checked={respondentData.consent}\n                onChange={handleRespondentDataChange}\n                required\n              />\n              <label htmlFor=\"consent\">\n                Я даю согласие на обработку моих персональных данных{\" \"}\n                <span className=\"required-mark\">*</span>\n              </label>\n            </div>\n          </div>\n        )}\n\n        <div className=\"navigation-buttons\">\n          {currentQuestionIndex > 0 && (\n            <button className=\"secondary-button\" onClick={prevQuestion}>\n              Назад\n            </button>\n          )}\n\n          {!isLastQuestion ? (\n            <button className=\"primary-button\" onClick={nextQuestion}>\n              Далее\n            </button>\n          ) : (\n            <>\n              {isPreview ? (\n                <button\n                  className=\"primary-button\"\n                  onClick={() => navigate(\"/dashboard\")}\n                >\n                  Завершить предпросмотр\n                </button>\n              ) : (\n                <button\n                  className=\"primary-button\"\n                  onClick={submitSurvey}\n                  disabled={submitting}\n                >\n                  {submitting ? \"Отправка...\" : \"Завершить опрос\"}\n                </button>\n              )}\n            </>\n          )}\n        </div>\n      </main>\n    </div>\n  )\n}\n\nexport default SurveyPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}