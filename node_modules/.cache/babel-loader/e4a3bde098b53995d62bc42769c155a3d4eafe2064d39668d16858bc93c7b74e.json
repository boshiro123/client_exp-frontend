{"ast":null,"code":"import axios from \"axios\";\nimport { authService } from \"./auth\";\n\n/**\n * Сервис для работы с опросниками через API\n */\n\nconst API_URL = \"http://localhost:8080/api/surveys\";\nclass SurveyService {\n  constructor() {\n    this.api = axios.create({\n      baseURL: API_URL\n    });\n\n    // Добавляем интерцептор для всех запросов\n    this.api.interceptors.request.use(config => {\n      // Добавляем токен авторизации к заголовкам запроса\n      const token = authService.getToken();\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n  }\n\n  // Создание нового опросника\n  async createSurvey(surveyData) {\n    try {\n      const response = await this.api.post(\"\", surveyData);\n      return response.data;\n    } catch (error) {\n      console.error(\"Ошибка при создании опросника:\", error);\n      throw error;\n    }\n  }\n\n  // Получение всех опросников\n  async getAllSurveys(page = 0, size = 10, status = null) {\n    try {\n      let url = `?page=${page}&size=${size}`;\n      if (status) {\n        url += `&status=${status}`;\n      }\n      const response = await this.api.get(url);\n      return response.data;\n    } catch (error) {\n      console.error(\"Ошибка при получении опросников:\", error);\n      throw error;\n    }\n  }\n\n  // Получение опросника по ID\n  async getSurveyById(id) {\n    try {\n      const response = await this.api.get(`/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error(`Ошибка при получении опросника с ID ${id}:`, error);\n      throw error;\n    }\n  }\n\n  // Обновление опросника\n  async updateSurvey(id, surveyData) {\n    try {\n      const response = await this.api.put(`/${id}`, surveyData);\n      return response.data;\n    } catch (error) {\n      console.error(`Ошибка при обновлении опросника с ID ${id}:`, error);\n      throw error;\n    }\n  }\n\n  // Удаление опросника\n  async deleteSurvey(id) {\n    try {\n      const response = await this.api.delete(`/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error(`Ошибка при удалении опросника с ID ${id}:`, error);\n      throw error;\n    }\n  }\n\n  // Изменение статуса опросника\n  async changeSurveyStatus(id, status) {\n    try {\n      const response = await this.api.patch(`/${id}/status`, {\n        status\n      });\n      return response.data;\n    } catch (error) {\n      console.error(`Ошибка при изменении статуса опросника с ID ${id}:`, error);\n      throw error;\n    }\n  }\n\n  // Получение результатов опросника\n  async getSurveyResults(id) {\n    try {\n      const response = await this.api.get(`/${id}/results`);\n      return response.data;\n    } catch (error) {\n      console.error(`Ошибка при получении результатов опросника с ID ${id}:`, error);\n      throw error;\n    }\n  }\n\n  // Экспорт опросника в PDF\n  async exportSurveyToPdf(id) {\n    try {\n      const response = await this.api.get(`/${id}/export/pdf`, {\n        responseType: \"blob\"\n      });\n      return response.data;\n    } catch (error) {\n      console.error(`Ошибка при экспорте опросника с ID ${id} в PDF:`, error);\n      throw error;\n    }\n  }\n\n  // Дублирование опросника\n  async duplicateSurvey(id) {\n    try {\n      const response = await this.api.post(`/${id}/duplicate`);\n      return response.data;\n    } catch (error) {\n      console.error(`Ошибка при дублировании опросника с ID ${id}:`, error);\n      throw error;\n    }\n  }\n}\nexport const surveyService = new SurveyService();","map":{"version":3,"names":["axios","authService","API_URL","SurveyService","constructor","api","create","baseURL","interceptors","request","use","config","token","getToken","headers","Authorization","error","Promise","reject","createSurvey","surveyData","response","post","data","console","getAllSurveys","page","size","status","url","get","getSurveyById","id","updateSurvey","put","deleteSurvey","delete","changeSurveyStatus","patch","getSurveyResults","exportSurveyToPdf","responseType","duplicateSurvey","surveyService"],"sources":["/Users/shirokiy/Desktop/Repositories/Дипломы/ClientExp/client_exp-frontend/src/api/survey.js"],"sourcesContent":["import axios from \"axios\"\nimport { authService } from \"./auth\"\n\n/**\n * Сервис для работы с опросниками через API\n */\n\nconst API_URL = \"http://localhost:8080/api/surveys\"\n\nclass SurveyService {\n  constructor() {\n    this.api = axios.create({\n      baseURL: API_URL,\n    })\n\n    // Добавляем интерцептор для всех запросов\n    this.api.interceptors.request.use(\n      config => {\n        // Добавляем токен авторизации к заголовкам запроса\n        const token = authService.getToken()\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`\n        }\n        return config\n      },\n      error => {\n        return Promise.reject(error)\n      }\n    )\n  }\n\n  // Создание нового опросника\n  async createSurvey(surveyData) {\n    try {\n      const response = await this.api.post(\"\", surveyData)\n      return response.data\n    } catch (error) {\n      console.error(\"Ошибка при создании опросника:\", error)\n      throw error\n    }\n  }\n\n  // Получение всех опросников\n  async getAllSurveys(page = 0, size = 10, status = null) {\n    try {\n      let url = `?page=${page}&size=${size}`\n      if (status) {\n        url += `&status=${status}`\n      }\n      const response = await this.api.get(url)\n      return response.data\n    } catch (error) {\n      console.error(\"Ошибка при получении опросников:\", error)\n      throw error\n    }\n  }\n\n  // Получение опросника по ID\n  async getSurveyById(id) {\n    try {\n      const response = await this.api.get(`/${id}`)\n      return response.data\n    } catch (error) {\n      console.error(`Ошибка при получении опросника с ID ${id}:`, error)\n      throw error\n    }\n  }\n\n  // Обновление опросника\n  async updateSurvey(id, surveyData) {\n    try {\n      const response = await this.api.put(`/${id}`, surveyData)\n      return response.data\n    } catch (error) {\n      console.error(`Ошибка при обновлении опросника с ID ${id}:`, error)\n      throw error\n    }\n  }\n\n  // Удаление опросника\n  async deleteSurvey(id) {\n    try {\n      const response = await this.api.delete(`/${id}`)\n      return response.data\n    } catch (error) {\n      console.error(`Ошибка при удалении опросника с ID ${id}:`, error)\n      throw error\n    }\n  }\n\n  // Изменение статуса опросника\n  async changeSurveyStatus(id, status) {\n    try {\n      const response = await this.api.patch(`/${id}/status`, { status })\n      return response.data\n    } catch (error) {\n      console.error(`Ошибка при изменении статуса опросника с ID ${id}:`, error)\n      throw error\n    }\n  }\n\n  // Получение результатов опросника\n  async getSurveyResults(id) {\n    try {\n      const response = await this.api.get(`/${id}/results`)\n      return response.data\n    } catch (error) {\n      console.error(\n        `Ошибка при получении результатов опросника с ID ${id}:`,\n        error\n      )\n      throw error\n    }\n  }\n\n  // Экспорт опросника в PDF\n  async exportSurveyToPdf(id) {\n    try {\n      const response = await this.api.get(`/${id}/export/pdf`, {\n        responseType: \"blob\",\n      })\n      return response.data\n    } catch (error) {\n      console.error(`Ошибка при экспорте опросника с ID ${id} в PDF:`, error)\n      throw error\n    }\n  }\n\n  // Дублирование опросника\n  async duplicateSurvey(id) {\n    try {\n      const response = await this.api.post(`/${id}/duplicate`)\n      return response.data\n    } catch (error) {\n      console.error(`Ошибка при дублировании опросника с ID ${id}:`, error)\n      throw error\n    }\n  }\n}\n\nexport const surveyService = new SurveyService()\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}