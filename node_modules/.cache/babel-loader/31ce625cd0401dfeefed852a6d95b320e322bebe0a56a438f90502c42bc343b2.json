{"ast":null,"code":"var _jsxFileName = \"/Users/shirokiy/Desktop/Repositories/\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u044B/ClientExp/client_exp-frontend/src/pages/Issues/IssuesPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Sidebar from \"../../components/common/Sidebar\";\nimport { authService } from \"../../api/auth\";\nimport { surveyService } from \"../../api/survey\";\nimport { PieChart, Pie, Cell, ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, LineChart, Line } from \"recharts\";\nimport \"./IssuesPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IssuesPage = () => {\n  _s();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [surveys, setSurveys] = useState([]);\n  const [selectedSurvey, setSelectedSurvey] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [metrics, setMetrics] = useState({\n    csat: null,\n    nps: null,\n    ces: null,\n    aspectsData: []\n  });\n  const navigate = useNavigate();\n  useEffect(() => {\n    const user = authService.getCurrentUser();\n    if (!user || user.role !== \"ADMIN\" && user.role !== \"MANAGER\") {\n      navigate(\"/login\");\n      return;\n    }\n    setCurrentUser(user);\n    loadSurveys();\n  }, [navigate]);\n  const loadSurveys = async () => {\n    try {\n      setLoading(true);\n      const surveysResponse = await surveyService.getAllSurveys();\n      let surveysData = [];\n      if (Array.isArray(surveysResponse)) {\n        surveysData = surveysResponse;\n      } else if (surveysResponse !== null && surveysResponse !== void 0 && surveysResponse.content) {\n        surveysData = surveysResponse.content;\n      }\n      setSurveys(surveysData);\n      if (surveysData.length > 0) {\n        // Автоматически выбираем первый опросник\n        handleSurveySelect(surveysData[0]);\n      }\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Ошибка при загрузке опросников:\", error);\n      setError(\"Не удалось загрузить данные опросников\");\n      setLoading(false);\n    }\n  };\n  const handleSurveySelect = async survey => {\n    setSelectedSurvey(survey);\n    setLoading(true);\n    try {\n      // Получаем ответы на опросник\n      const responsesData = await surveyService.getSurveyResponses(survey.id);\n      let responses = Array.isArray(responsesData) ? responsesData : (responsesData === null || responsesData === void 0 ? void 0 : responsesData.content) || [];\n      console.log(\"Responses for survey:\", survey.id, responses);\n      console.log(\"Survey questions:\", survey.questions);\n\n      // Вычисляем метрики\n      const calculatedMetrics = calculateMetrics(responses, survey.questions);\n      setMetrics(calculatedMetrics);\n    } catch (error) {\n      console.error(\"Ошибка при получении ответов:\", error);\n      setError(\"Не удалось загрузить ответы на опросник\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const calculateMetrics = (responses, questions) => {\n    if (!responses || !questions) return {\n      csat: null,\n      nps: null,\n      ces: null,\n      aspectsData: []\n    };\n\n    // Найдем нужные вопросы по тексту\n    const csatQuestion = questions.find(q => q.text.toLowerCase().includes(\"удовлетворенность\") && q.text.toLowerCase().includes(\"шкале от 1 до 5\"));\n    const npsQuestion = questions.find(q => q.text.toLowerCase().includes(\"порекомендуете\") || q.text.toLowerCase().includes(\"друзьям\"));\n    const cesQuestion = questions.find(q => q.text.toLowerCase().includes(\"удобство\") && q.text.toLowerCase().includes(\"веб\"));\n    const aspectsQuestion = questions.find(q => q.text.toLowerCase().includes(\"аспекты\") && q.text.toLowerCase().includes(\"понравились\"));\n    console.log(\"Found questions:\", {\n      csatQuestion,\n      npsQuestion,\n      cesQuestion,\n      aspectsQuestion\n    });\n    let csat = null;\n    let nps = null;\n    let ces = null;\n    let aspectsData = [];\n\n    // Обрабатываем все ответы\n    responses.forEach(response => {\n      if (!response.answers) return;\n      response.answers.forEach(answer => {\n        // CSAT метрика\n        if (csatQuestion && answer.questionId === csatQuestion.id) {\n          if (!csat) {\n            csat = {\n              satisfied: 0,\n              neutral: 0,\n              dissatisfied: 0,\n              total: 0\n            };\n          }\n\n          // Извлекаем число из ответа (например, \"4 – Скорее доволен\" -> 4)\n          const rating = extractRating(answer.answer);\n          if (rating >= 4) csat.satisfied++;else if (rating === 3) csat.neutral++;else if (rating >= 1) csat.dissatisfied++;\n          csat.total++;\n        }\n\n        // NPS метрика\n        if (npsQuestion && answer.questionId === npsQuestion.id) {\n          if (!nps) {\n            nps = {\n              promoters: 0,\n              neutrals: 0,\n              detractors: 0,\n              total: 0\n            };\n          }\n          const rating = parseInt(answer.answer) || 0;\n          if (rating >= 9) nps.promoters++;else if (rating >= 7) nps.neutrals++;else nps.detractors++;\n          nps.total++;\n        }\n\n        // CES метрика\n        if (cesQuestion && answer.questionId === cesQuestion.id) {\n          if (!ces) {\n            ces = {\n              total: 0,\n              sum: 0,\n              count: 0\n            };\n          }\n          const rating = extractRating(answer.answer);\n          ces.sum += rating;\n          ces.count++;\n        }\n\n        // Аспекты услуги\n        if (aspectsQuestion && answer.questionId === aspectsQuestion.id) {\n          const aspects = Array.isArray(answer.answer) ? answer.answer : [answer.answer];\n          aspects.forEach(aspect => {\n            if (aspect && aspect.trim()) {\n              const existing = aspectsData.find(item => item.name === aspect);\n              if (existing) {\n                existing.count++;\n              } else {\n                aspectsData.push({\n                  name: aspect,\n                  count: 1\n                });\n              }\n            }\n          });\n        }\n      });\n    });\n\n    // Финальные вычисления\n    if (csat) {\n      csat.percentage = csat.total > 0 ? Math.round(csat.satisfied / csat.total * 100) : 0;\n    }\n    if (nps) {\n      nps.score = nps.total > 0 ? Math.round((nps.promoters - nps.detractors) / nps.total * 100) : 0;\n    }\n    if (ces) {\n      ces.score = ces.count > 0 ? (ces.sum / ces.count).toFixed(2) : 0;\n    }\n    console.log(\"Calculated metrics:\", {\n      csat,\n      nps,\n      ces,\n      aspectsData\n    });\n    return {\n      csat,\n      nps,\n      ces,\n      aspectsData\n    };\n  };\n\n  // Функция для извлечения числового рейтинга из текста ответа\n  const extractRating = answerText => {\n    if (!answerText) return 0;\n    const match = answerText.match(/^(\\d+)/);\n    return match ? parseInt(match[1]) : 0;\n  };\n\n  // Цвета для графиков\n  const COLORS = {\n    satisfied: \"#4CAF50\",\n    neutral: \"#FF9800\",\n    dissatisfied: \"#F44336\",\n    promoters: \"#4CAF50\",\n    detractors: \"#F44336\",\n    neutrals: \"#FF9800\"\n  };\n  const getNPSColor = score => {\n    if (score >= 70) return \"#4CAF50\"; // зеленый\n    if (score >= 30) return \"#FF9800\"; // желтый\n    return \"#F44336\"; // красный\n  };\n  const renderCSATChart = () => {\n    if (!metrics.csat) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-data\",\n      children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0434\\u043B\\u044F CSAT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 31\n    }, this);\n    const data = [{\n      name: \"Довольные\",\n      value: metrics.csat.satisfied,\n      color: COLORS.satisfied\n    }, {\n      name: \"Нейтральные\",\n      value: metrics.csat.neutral,\n      color: COLORS.neutral\n    }, {\n      name: \"Недовольные\",\n      value: metrics.csat.dissatisfied,\n      color: COLORS.dissatisfied\n    }].filter(item => item.value > 0);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metric-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"CSAT (Customer Satisfaction Score)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"metric-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"metric-score\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"score-value\",\n            children: [metrics.csat.percentage, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"score-label\",\n            children: \"\\u0434\\u043E\\u0432\\u043E\\u043B\\u044C\\u043D\\u044B\\u0445 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u043E\\u0432\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-container\",\n          children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"100%\",\n            height: 200,\n            children: /*#__PURE__*/_jsxDEV(PieChart, {\n              children: [/*#__PURE__*/_jsxDEV(Pie, {\n                data: data,\n                cx: \"50%\",\n                cy: \"50%\",\n                outerRadius: 80,\n                dataKey: \"value\",\n                label: ({\n                  name,\n                  value\n                }) => `${name}: ${value}`,\n                children: data.map((entry, index) => /*#__PURE__*/_jsxDEV(Cell, {\n                  fill: entry.color\n                }, `cell-${index}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"metric-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-label\",\n            children: \"\\u0414\\u043E\\u0432\\u043E\\u043B\\u044C\\u043D\\u044B\\u0435 (4-5):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: metrics.csat.satisfied\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-label\",\n            children: \"\\u041D\\u0435\\u0439\\u0442\\u0440\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435 (3):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: metrics.csat.neutral\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-label\",\n            children: \"\\u041D\\u0435\\u0434\\u043E\\u0432\\u043E\\u043B\\u044C\\u043D\\u044B\\u0435 (1-2):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: metrics.csat.dissatisfied\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this);\n  };\n  const renderNPSChart = () => {\n    if (!metrics.nps) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-data\",\n      children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0434\\u043B\\u044F NPS\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 30\n    }, this);\n    const data = [{\n      name: \"Промоутеры\",\n      value: metrics.nps.promoters,\n      color: COLORS.promoters\n    }, {\n      name: \"Нейтралы\",\n      value: metrics.nps.neutrals,\n      color: COLORS.neutrals\n    }, {\n      name: \"Детракторы\",\n      value: metrics.nps.detractors,\n      color: COLORS.detractors\n    }].filter(item => item.value > 0);\n    const npsLevel = metrics.nps.score >= 70 ? \"отличный\" : metrics.nps.score >= 30 ? \"хороший\" : \"удовлетворительный\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metric-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"NPS (Net Promoter Score)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"metric-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"metric-score\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"score-value\",\n            style: {\n              color: getNPSColor(metrics.nps.score)\n            },\n            children: metrics.nps.score\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"score-label\",\n            children: [npsLevel, \" \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-container\",\n          children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"100%\",\n            height: 200,\n            children: /*#__PURE__*/_jsxDEV(PieChart, {\n              children: [/*#__PURE__*/_jsxDEV(Pie, {\n                data: data,\n                cx: \"50%\",\n                cy: \"50%\",\n                outerRadius: 80,\n                dataKey: \"value\",\n                label: ({\n                  name,\n                  value\n                }) => `${name}: ${value}`,\n                children: data.map((entry, index) => /*#__PURE__*/_jsxDEV(Cell, {\n                  fill: entry.color\n                }, `cell-${index}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"metric-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-label\",\n            children: \"\\u041F\\u0440\\u043E\\u043C\\u043E\\u0443\\u0442\\u0435\\u0440\\u044B (9-10):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: metrics.nps.promoters\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-label\",\n            children: \"\\u041D\\u0435\\u0439\\u0442\\u0440\\u0430\\u043B\\u044B (7-8):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: metrics.nps.neutrals\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-label\",\n            children: \"\\u0414\\u0435\\u0442\\u0440\\u0430\\u043A\\u0442\\u043E\\u0440\\u044B (0-6):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: metrics.nps.detractors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this);\n  };\n  const renderCESChart = () => {\n    if (!metrics.ces) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-data\",\n      children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0434\\u043B\\u044F CES\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 30\n    }, this);\n    const cesLevel = metrics.ces.score <= 2 ? \"отлично\" : metrics.ces.score <= 3 ? \"хорошо\" : metrics.ces.score <= 4 ? \"удовлетворительно\" : \"плохо\";\n    const cesColor = metrics.ces.score <= 2 ? \"#4CAF50\" : metrics.ces.score <= 3 ? \"#8BC34A\" : metrics.ces.score <= 4 ? \"#FF9800\" : \"#F44336\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metric-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"CES (Customer Effort Score)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"metric-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"metric-score\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"score-value\",\n            style: {\n              color: cesColor\n            },\n            children: metrics.ces.score\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"score-label\",\n            children: cesLevel\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ces-scale\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scale-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-number\",\n              children: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-label\",\n              children: \"\\u041E\\u0447\\u0435\\u043D\\u044C \\u043B\\u0435\\u0433\\u043A\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scale-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-number\",\n              children: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-label\",\n              children: \"\\u0421\\u043A\\u043E\\u0440\\u0435\\u0435 \\u043B\\u0435\\u0433\\u043A\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scale-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-number\",\n              children: \"3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-label\",\n              children: \"\\u041D\\u0435\\u0439\\u0442\\u0440\\u0430\\u043B\\u044C\\u043D\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scale-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-number\",\n              children: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-label\",\n              children: \"\\u0421\\u043A\\u043E\\u0440\\u0435\\u0435 \\u0441\\u043B\\u043E\\u0436\\u043D\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scale-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-number\",\n              children: \"5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scale-label\",\n              children: \"\\u041E\\u0447\\u0435\\u043D\\u044C \\u0441\\u043B\\u043E\\u0436\\u043D\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"scale-indicator\",\n            style: {\n              left: `${(metrics.ces.score - 1) / 4 * 100}%`,\n              backgroundColor: cesColor\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"metric-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0427\\u0435\\u043C \\u0431\\u043B\\u0438\\u0436\\u0435 \\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435 \\u043A 1, \\u0442\\u0435\\u043C \\u043F\\u0440\\u043E\\u0449\\u0435 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\\u043C \\u0432\\u0437\\u0430\\u0438\\u043C\\u043E\\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441 \\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0435\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-label\",\n            children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: metrics.ces.count\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 7\n    }, this);\n  };\n  const renderAspectsChart = () => {\n    if (!metrics.aspectsData.length) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-data\",\n      children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043E\\u0431 \\u0430\\u0441\\u043F\\u0435\\u043A\\u0442\\u0430\\u0445\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 14\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metric-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435 \\u0430\\u0441\\u043F\\u0435\\u043A\\u0442\\u044B \\u0443\\u0441\\u043B\\u0443\\u0433\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-container\",\n        children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: 300,\n          children: /*#__PURE__*/_jsxDEV(BarChart, {\n            data: metrics.aspectsData,\n            margin: {\n              top: 20,\n              right: 30,\n              left: 20,\n              bottom: 5\n            },\n            children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n              strokeDasharray: \"3 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n              dataKey: \"name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Bar, {\n              dataKey: \"count\",\n              fill: \"#2196F3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      user: currentUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"issues-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u0410\\u043D\\u0430\\u043B\\u0438\\u0437 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0441\\u043A\\u043E\\u0433\\u043E \\u043E\\u043F\\u044B\\u0442\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"survey-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"survey-select\",\n            children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"survey-select\",\n            value: (selectedSurvey === null || selectedSurvey === void 0 ? void 0 : selectedSurvey.id) || \"\",\n            onChange: e => {\n              const survey = surveys.find(s => s.id === parseInt(e.target.value));\n              if (survey) handleSurveySelect(survey);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 15\n            }, this), surveys.map(survey => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: survey.id,\n              children: survey.title\n            }, survey.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-indicator\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 11\n      }, this) : !selectedSurvey ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-data-message\",\n        children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A \\u0434\\u043B\\u044F \\u0430\\u043D\\u0430\\u043B\\u0438\\u0437\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"metrics-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"metrics-grid\",\n          children: [renderCSATChart(), renderNPSChart(), renderCESChart(), renderAspectsChart()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 488,\n    columnNumber: 5\n  }, this);\n};\n_s(IssuesPage, \"QDh2m9ISPVtPv0TKZy2aVdBPXKE=\", false, function () {\n  return [useNavigate];\n});\n_c = IssuesPage;\nexport default IssuesPage;\nvar _c;\n$RefreshReg$(_c, \"IssuesPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Sidebar","authService","surveyService","PieChart","Pie","Cell","ResponsiveContainer","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","LineChart","Line","jsxDEV","_jsxDEV","IssuesPage","_s","currentUser","setCurrentUser","surveys","setSurveys","selectedSurvey","setSelectedSurvey","loading","setLoading","error","setError","metrics","setMetrics","csat","nps","ces","aspectsData","navigate","user","getCurrentUser","role","loadSurveys","surveysResponse","getAllSurveys","surveysData","Array","isArray","content","length","handleSurveySelect","console","survey","responsesData","getSurveyResponses","id","responses","log","questions","calculatedMetrics","calculateMetrics","csatQuestion","find","q","text","toLowerCase","includes","npsQuestion","cesQuestion","aspectsQuestion","forEach","response","answers","answer","questionId","satisfied","neutral","dissatisfied","total","rating","extractRating","promoters","neutrals","detractors","parseInt","sum","count","aspects","aspect","trim","existing","item","name","push","percentage","Math","round","score","toFixed","answerText","match","COLORS","getNPSColor","renderCSATChart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","data","value","color","filter","width","height","cx","cy","outerRadius","dataKey","label","map","entry","index","fill","renderNPSChart","npsLevel","style","renderCESChart","cesLevel","cesColor","left","backgroundColor","renderAspectsChart","margin","top","right","bottom","strokeDasharray","htmlFor","onChange","e","s","target","title","_c","$RefreshReg$"],"sources":["/Users/shirokiy/Desktop/Repositories/Дипломы/ClientExp/client_exp-frontend/src/pages/Issues/IssuesPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport Sidebar from \"../../components/common/Sidebar\"\nimport { authService } from \"../../api/auth\"\nimport { surveyService } from \"../../api/survey\"\nimport {\n  PieChart,\n  Pie,\n  Cell,\n  ResponsiveContainer,\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  LineChart,\n  Line,\n} from \"recharts\"\nimport \"./IssuesPage.css\"\n\nconst IssuesPage = () => {\n  const [currentUser, setCurrentUser] = useState(null)\n  const [surveys, setSurveys] = useState([])\n  const [selectedSurvey, setSelectedSurvey] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const [metrics, setMetrics] = useState({\n    csat: null,\n    nps: null,\n    ces: null,\n    aspectsData: [],\n  })\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    const user = authService.getCurrentUser()\n    if (!user || (user.role !== \"ADMIN\" && user.role !== \"MANAGER\")) {\n      navigate(\"/login\")\n      return\n    }\n    setCurrentUser(user)\n    loadSurveys()\n  }, [navigate])\n\n  const loadSurveys = async () => {\n    try {\n      setLoading(true)\n      const surveysResponse = await surveyService.getAllSurveys()\n\n      let surveysData = []\n      if (Array.isArray(surveysResponse)) {\n        surveysData = surveysResponse\n      } else if (surveysResponse?.content) {\n        surveysData = surveysResponse.content\n      }\n\n      setSurveys(surveysData)\n      if (surveysData.length > 0) {\n        // Автоматически выбираем первый опросник\n        handleSurveySelect(surveysData[0])\n      }\n      setLoading(false)\n    } catch (error) {\n      console.error(\"Ошибка при загрузке опросников:\", error)\n      setError(\"Не удалось загрузить данные опросников\")\n      setLoading(false)\n    }\n  }\n\n  const handleSurveySelect = async survey => {\n    setSelectedSurvey(survey)\n    setLoading(true)\n\n    try {\n      // Получаем ответы на опросник\n      const responsesData = await surveyService.getSurveyResponses(survey.id)\n      let responses = Array.isArray(responsesData)\n        ? responsesData\n        : responsesData?.content || []\n\n      console.log(\"Responses for survey:\", survey.id, responses)\n      console.log(\"Survey questions:\", survey.questions)\n\n      // Вычисляем метрики\n      const calculatedMetrics = calculateMetrics(responses, survey.questions)\n      setMetrics(calculatedMetrics)\n    } catch (error) {\n      console.error(\"Ошибка при получении ответов:\", error)\n      setError(\"Не удалось загрузить ответы на опросник\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const calculateMetrics = (responses, questions) => {\n    if (!responses || !questions)\n      return { csat: null, nps: null, ces: null, aspectsData: [] }\n\n    // Найдем нужные вопросы по тексту\n    const csatQuestion = questions.find(\n      q =>\n        q.text.toLowerCase().includes(\"удовлетворенность\") &&\n        q.text.toLowerCase().includes(\"шкале от 1 до 5\")\n    )\n\n    const npsQuestion = questions.find(\n      q =>\n        q.text.toLowerCase().includes(\"порекомендуете\") ||\n        q.text.toLowerCase().includes(\"друзьям\")\n    )\n\n    const cesQuestion = questions.find(\n      q =>\n        q.text.toLowerCase().includes(\"удобство\") &&\n        q.text.toLowerCase().includes(\"веб\")\n    )\n\n    const aspectsQuestion = questions.find(\n      q =>\n        q.text.toLowerCase().includes(\"аспекты\") &&\n        q.text.toLowerCase().includes(\"понравились\")\n    )\n\n    console.log(\"Found questions:\", {\n      csatQuestion,\n      npsQuestion,\n      cesQuestion,\n      aspectsQuestion,\n    })\n\n    let csat = null\n    let nps = null\n    let ces = null\n    let aspectsData = []\n\n    // Обрабатываем все ответы\n    responses.forEach(response => {\n      if (!response.answers) return\n\n      response.answers.forEach(answer => {\n        // CSAT метрика\n        if (csatQuestion && answer.questionId === csatQuestion.id) {\n          if (!csat) {\n            csat = { satisfied: 0, neutral: 0, dissatisfied: 0, total: 0 }\n          }\n\n          // Извлекаем число из ответа (например, \"4 – Скорее доволен\" -> 4)\n          const rating = extractRating(answer.answer)\n          if (rating >= 4) csat.satisfied++\n          else if (rating === 3) csat.neutral++\n          else if (rating >= 1) csat.dissatisfied++\n          csat.total++\n        }\n\n        // NPS метрика\n        if (npsQuestion && answer.questionId === npsQuestion.id) {\n          if (!nps) {\n            nps = { promoters: 0, neutrals: 0, detractors: 0, total: 0 }\n          }\n\n          const rating = parseInt(answer.answer) || 0\n          if (rating >= 9) nps.promoters++\n          else if (rating >= 7) nps.neutrals++\n          else nps.detractors++\n          nps.total++\n        }\n\n        // CES метрика\n        if (cesQuestion && answer.questionId === cesQuestion.id) {\n          if (!ces) {\n            ces = { total: 0, sum: 0, count: 0 }\n          }\n\n          const rating = extractRating(answer.answer)\n          ces.sum += rating\n          ces.count++\n        }\n\n        // Аспекты услуги\n        if (aspectsQuestion && answer.questionId === aspectsQuestion.id) {\n          const aspects = Array.isArray(answer.answer)\n            ? answer.answer\n            : [answer.answer]\n          aspects.forEach(aspect => {\n            if (aspect && aspect.trim()) {\n              const existing = aspectsData.find(item => item.name === aspect)\n              if (existing) {\n                existing.count++\n              } else {\n                aspectsData.push({ name: aspect, count: 1 })\n              }\n            }\n          })\n        }\n      })\n    })\n\n    // Финальные вычисления\n    if (csat) {\n      csat.percentage =\n        csat.total > 0 ? Math.round((csat.satisfied / csat.total) * 100) : 0\n    }\n\n    if (nps) {\n      nps.score =\n        nps.total > 0\n          ? Math.round(((nps.promoters - nps.detractors) / nps.total) * 100)\n          : 0\n    }\n\n    if (ces) {\n      ces.score = ces.count > 0 ? (ces.sum / ces.count).toFixed(2) : 0\n    }\n\n    console.log(\"Calculated metrics:\", { csat, nps, ces, aspectsData })\n\n    return { csat, nps, ces, aspectsData }\n  }\n\n  // Функция для извлечения числового рейтинга из текста ответа\n  const extractRating = answerText => {\n    if (!answerText) return 0\n    const match = answerText.match(/^(\\d+)/)\n    return match ? parseInt(match[1]) : 0\n  }\n\n  // Цвета для графиков\n  const COLORS = {\n    satisfied: \"#4CAF50\",\n    neutral: \"#FF9800\",\n    dissatisfied: \"#F44336\",\n    promoters: \"#4CAF50\",\n    detractors: \"#F44336\",\n    neutrals: \"#FF9800\",\n  }\n\n  const getNPSColor = score => {\n    if (score >= 70) return \"#4CAF50\" // зеленый\n    if (score >= 30) return \"#FF9800\" // желтый\n    return \"#F44336\" // красный\n  }\n\n  const renderCSATChart = () => {\n    if (!metrics.csat) return <div className=\"no-data\">Нет данных для CSAT</div>\n\n    const data = [\n      {\n        name: \"Довольные\",\n        value: metrics.csat.satisfied,\n        color: COLORS.satisfied,\n      },\n      {\n        name: \"Нейтральные\",\n        value: metrics.csat.neutral,\n        color: COLORS.neutral,\n      },\n      {\n        name: \"Недовольные\",\n        value: metrics.csat.dissatisfied,\n        color: COLORS.dissatisfied,\n      },\n    ].filter(item => item.value > 0)\n\n    return (\n      <div className=\"metric-card\">\n        <h3>CSAT (Customer Satisfaction Score)</h3>\n        <div className=\"metric-main\">\n          <div className=\"metric-score\">\n            <span className=\"score-value\">{metrics.csat.percentage}%</span>\n            <span className=\"score-label\">довольных клиентов</span>\n          </div>\n          <div className=\"chart-container\">\n            <ResponsiveContainer width=\"100%\" height={200}>\n              <PieChart>\n                <Pie\n                  data={data}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  outerRadius={80}\n                  dataKey=\"value\"\n                  label={({ name, value }) => `${name}: ${value}`}\n                >\n                  {data.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={entry.color} />\n                  ))}\n                </Pie>\n                <Tooltip />\n              </PieChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n        <div className=\"metric-details\">\n          <div className=\"detail-item\">\n            <span className=\"detail-label\">Довольные (4-5):</span>\n            <span className=\"detail-value\">{metrics.csat.satisfied}</span>\n          </div>\n          <div className=\"detail-item\">\n            <span className=\"detail-label\">Нейтральные (3):</span>\n            <span className=\"detail-value\">{metrics.csat.neutral}</span>\n          </div>\n          <div className=\"detail-item\">\n            <span className=\"detail-label\">Недовольные (1-2):</span>\n            <span className=\"detail-value\">{metrics.csat.dissatisfied}</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const renderNPSChart = () => {\n    if (!metrics.nps) return <div className=\"no-data\">Нет данных для NPS</div>\n\n    const data = [\n      {\n        name: \"Промоутеры\",\n        value: metrics.nps.promoters,\n        color: COLORS.promoters,\n      },\n      { name: \"Нейтралы\", value: metrics.nps.neutrals, color: COLORS.neutrals },\n      {\n        name: \"Детракторы\",\n        value: metrics.nps.detractors,\n        color: COLORS.detractors,\n      },\n    ].filter(item => item.value > 0)\n\n    const npsLevel =\n      metrics.nps.score >= 70\n        ? \"отличный\"\n        : metrics.nps.score >= 30\n        ? \"хороший\"\n        : \"удовлетворительный\"\n\n    return (\n      <div className=\"metric-card\">\n        <h3>NPS (Net Promoter Score)</h3>\n        <div className=\"metric-main\">\n          <div className=\"metric-score\">\n            <span\n              className=\"score-value\"\n              style={{ color: getNPSColor(metrics.nps.score) }}\n            >\n              {metrics.nps.score}\n            </span>\n            <span className=\"score-label\">{npsLevel} результат</span>\n          </div>\n          <div className=\"chart-container\">\n            <ResponsiveContainer width=\"100%\" height={200}>\n              <PieChart>\n                <Pie\n                  data={data}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  outerRadius={80}\n                  dataKey=\"value\"\n                  label={({ name, value }) => `${name}: ${value}`}\n                >\n                  {data.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={entry.color} />\n                  ))}\n                </Pie>\n                <Tooltip />\n              </PieChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n        <div className=\"metric-details\">\n          <div className=\"detail-item\">\n            <span className=\"detail-label\">Промоутеры (9-10):</span>\n            <span className=\"detail-value\">{metrics.nps.promoters}</span>\n          </div>\n          <div className=\"detail-item\">\n            <span className=\"detail-label\">Нейтралы (7-8):</span>\n            <span className=\"detail-value\">{metrics.nps.neutrals}</span>\n          </div>\n          <div className=\"detail-item\">\n            <span className=\"detail-label\">Детракторы (0-6):</span>\n            <span className=\"detail-value\">{metrics.nps.detractors}</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const renderCESChart = () => {\n    if (!metrics.ces) return <div className=\"no-data\">Нет данных для CES</div>\n\n    const cesLevel =\n      metrics.ces.score <= 2\n        ? \"отлично\"\n        : metrics.ces.score <= 3\n        ? \"хорошо\"\n        : metrics.ces.score <= 4\n        ? \"удовлетворительно\"\n        : \"плохо\"\n\n    const cesColor =\n      metrics.ces.score <= 2\n        ? \"#4CAF50\"\n        : metrics.ces.score <= 3\n        ? \"#8BC34A\"\n        : metrics.ces.score <= 4\n        ? \"#FF9800\"\n        : \"#F44336\"\n\n    return (\n      <div className=\"metric-card\">\n        <h3>CES (Customer Effort Score)</h3>\n        <div className=\"metric-main\">\n          <div className=\"metric-score\">\n            <span className=\"score-value\" style={{ color: cesColor }}>\n              {metrics.ces.score}\n            </span>\n            <span className=\"score-label\">{cesLevel}</span>\n          </div>\n          <div className=\"ces-scale\">\n            <div className=\"scale-item\">\n              <div className=\"scale-number\">1</div>\n              <div className=\"scale-label\">Очень легко</div>\n            </div>\n            <div className=\"scale-item\">\n              <div className=\"scale-number\">2</div>\n              <div className=\"scale-label\">Скорее легко</div>\n            </div>\n            <div className=\"scale-item\">\n              <div className=\"scale-number\">3</div>\n              <div className=\"scale-label\">Нейтрально</div>\n            </div>\n            <div className=\"scale-item\">\n              <div className=\"scale-number\">4</div>\n              <div className=\"scale-label\">Скорее сложно</div>\n            </div>\n            <div className=\"scale-item\">\n              <div className=\"scale-number\">5</div>\n              <div className=\"scale-label\">Очень сложно</div>\n            </div>\n            <div\n              className=\"scale-indicator\"\n              style={{\n                left: `${((metrics.ces.score - 1) / 4) * 100}%`,\n                backgroundColor: cesColor,\n              }}\n            />\n          </div>\n        </div>\n        <div className=\"metric-details\">\n          <p>\n            Чем ближе значение к 1, тем проще клиентам взаимодействовать с\n            компанией\n          </p>\n          <div className=\"detail-item\">\n            <span className=\"detail-label\">Количество ответов:</span>\n            <span className=\"detail-value\">{metrics.ces.count}</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const renderAspectsChart = () => {\n    if (!metrics.aspectsData.length)\n      return <div className=\"no-data\">Нет данных об аспектах</div>\n\n    return (\n      <div className=\"metric-card\">\n        <h3>Популярные аспекты услуги</h3>\n        <div className=\"chart-container\">\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart\n              data={metrics.aspectsData}\n              margin={{ top: 20, right: 30, left: 20, bottom: 5 }}\n            >\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"name\" />\n              <YAxis />\n              <Tooltip />\n              <Bar dataKey=\"count\" fill=\"#2196F3\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"dashboard-container\">\n      <Sidebar user={currentUser} />\n      <div className=\"dashboard-content\">\n        <div className=\"issues-header\">\n          <h1>Анализ клиентского опыта</h1>\n          <div className=\"survey-selector\">\n            <label htmlFor=\"survey-select\">Выберите опросник:</label>\n            <select\n              id=\"survey-select\"\n              value={selectedSurvey?.id || \"\"}\n              onChange={e => {\n                const survey = surveys.find(\n                  s => s.id === parseInt(e.target.value)\n                )\n                if (survey) handleSurveySelect(survey)\n              }}\n            >\n              <option value=\"\">Выберите опросник</option>\n              {surveys.map(survey => (\n                <option key={survey.id} value={survey.id}>\n                  {survey.title}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"loading-indicator\">Загрузка данных...</div>\n        ) : error ? (\n          <div className=\"error-message\">{error}</div>\n        ) : !selectedSurvey ? (\n          <div className=\"no-data-message\">Выберите опросник для анализа</div>\n        ) : (\n          <div className=\"metrics-container\">\n            <div className=\"metrics-grid\">\n              {renderCSATChart()}\n              {renderNPSChart()}\n              {renderCESChart()}\n              {renderAspectsChart()}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default IssuesPage\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,OAAO,MAAM,iCAAiC;AACrD,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SACEC,QAAQ,EACRC,GAAG,EACHC,IAAI,EACJC,mBAAmB,EACnBC,QAAQ,EACRC,GAAG,EACHC,KAAK,EACLC,KAAK,EACLC,aAAa,EACbC,OAAO,EACPC,MAAM,EACNC,SAAS,EACTC,IAAI,QACC,UAAU;AACjB,OAAO,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEzB,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAAC2B,cAAc,EAAEC,iBAAiB,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAAC6B,OAAO,EAAEC,UAAU,CAAC,GAAG9B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC+B,KAAK,EAAEC,QAAQ,CAAC,GAAGhC,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACiC,OAAO,EAAEC,UAAU,CAAC,GAAGlC,QAAQ,CAAC;IACrCmC,IAAI,EAAE,IAAI;IACVC,GAAG,EAAE,IAAI;IACTC,GAAG,EAAE,IAAI;IACTC,WAAW,EAAE;EACf,CAAC,CAAC;EACF,MAAMC,QAAQ,GAAGrC,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMuC,IAAI,GAAGpC,WAAW,CAACqC,cAAc,CAAC,CAAC;IACzC,IAAI,CAACD,IAAI,IAAKA,IAAI,CAACE,IAAI,KAAK,OAAO,IAAIF,IAAI,CAACE,IAAI,KAAK,SAAU,EAAE;MAC/DH,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;IACAf,cAAc,CAACgB,IAAI,CAAC;IACpBG,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAACJ,QAAQ,CAAC,CAAC;EAEd,MAAMI,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACFb,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMc,eAAe,GAAG,MAAMvC,aAAa,CAACwC,aAAa,CAAC,CAAC;MAE3D,IAAIC,WAAW,GAAG,EAAE;MACpB,IAAIC,KAAK,CAACC,OAAO,CAACJ,eAAe,CAAC,EAAE;QAClCE,WAAW,GAAGF,eAAe;MAC/B,CAAC,MAAM,IAAIA,eAAe,aAAfA,eAAe,eAAfA,eAAe,CAAEK,OAAO,EAAE;QACnCH,WAAW,GAAGF,eAAe,CAACK,OAAO;MACvC;MAEAvB,UAAU,CAACoB,WAAW,CAAC;MACvB,IAAIA,WAAW,CAACI,MAAM,GAAG,CAAC,EAAE;QAC1B;QACAC,kBAAkB,CAACL,WAAW,CAAC,CAAC,CAAC,CAAC;MACpC;MACAhB,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdqB,OAAO,CAACrB,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvDC,QAAQ,CAAC,wCAAwC,CAAC;MAClDF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMqB,kBAAkB,GAAG,MAAME,MAAM,IAAI;IACzCzB,iBAAiB,CAACyB,MAAM,CAAC;IACzBvB,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAI;MACF;MACA,MAAMwB,aAAa,GAAG,MAAMjD,aAAa,CAACkD,kBAAkB,CAACF,MAAM,CAACG,EAAE,CAAC;MACvE,IAAIC,SAAS,GAAGV,KAAK,CAACC,OAAO,CAACM,aAAa,CAAC,GACxCA,aAAa,GACb,CAAAA,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEL,OAAO,KAAI,EAAE;MAEhCG,OAAO,CAACM,GAAG,CAAC,uBAAuB,EAAEL,MAAM,CAACG,EAAE,EAAEC,SAAS,CAAC;MAC1DL,OAAO,CAACM,GAAG,CAAC,mBAAmB,EAAEL,MAAM,CAACM,SAAS,CAAC;;MAElD;MACA,MAAMC,iBAAiB,GAAGC,gBAAgB,CAACJ,SAAS,EAAEJ,MAAM,CAACM,SAAS,CAAC;MACvEzB,UAAU,CAAC0B,iBAAiB,CAAC;IAC/B,CAAC,CAAC,OAAO7B,KAAK,EAAE;MACdqB,OAAO,CAACrB,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrDC,QAAQ,CAAC,yCAAyC,CAAC;IACrD,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM+B,gBAAgB,GAAGA,CAACJ,SAAS,EAAEE,SAAS,KAAK;IACjD,IAAI,CAACF,SAAS,IAAI,CAACE,SAAS,EAC1B,OAAO;MAAExB,IAAI,EAAE,IAAI;MAAEC,GAAG,EAAE,IAAI;MAAEC,GAAG,EAAE,IAAI;MAAEC,WAAW,EAAE;IAAG,CAAC;;IAE9D;IACA,MAAMwB,YAAY,GAAGH,SAAS,CAACI,IAAI,CACjCC,CAAC,IACCA,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,mBAAmB,CAAC,IAClDH,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,iBAAiB,CACnD,CAAC;IAED,MAAMC,WAAW,GAAGT,SAAS,CAACI,IAAI,CAChCC,CAAC,IACCA,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,gBAAgB,CAAC,IAC/CH,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,SAAS,CAC3C,CAAC;IAED,MAAME,WAAW,GAAGV,SAAS,CAACI,IAAI,CAChCC,CAAC,IACCA,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,UAAU,CAAC,IACzCH,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,KAAK,CACvC,CAAC;IAED,MAAMG,eAAe,GAAGX,SAAS,CAACI,IAAI,CACpCC,CAAC,IACCA,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,SAAS,CAAC,IACxCH,CAAC,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,aAAa,CAC/C,CAAC;IAEDf,OAAO,CAACM,GAAG,CAAC,kBAAkB,EAAE;MAC9BI,YAAY;MACZM,WAAW;MACXC,WAAW;MACXC;IACF,CAAC,CAAC;IAEF,IAAInC,IAAI,GAAG,IAAI;IACf,IAAIC,GAAG,GAAG,IAAI;IACd,IAAIC,GAAG,GAAG,IAAI;IACd,IAAIC,WAAW,GAAG,EAAE;;IAEpB;IACAmB,SAAS,CAACc,OAAO,CAACC,QAAQ,IAAI;MAC5B,IAAI,CAACA,QAAQ,CAACC,OAAO,EAAE;MAEvBD,QAAQ,CAACC,OAAO,CAACF,OAAO,CAACG,MAAM,IAAI;QACjC;QACA,IAAIZ,YAAY,IAAIY,MAAM,CAACC,UAAU,KAAKb,YAAY,CAACN,EAAE,EAAE;UACzD,IAAI,CAACrB,IAAI,EAAE;YACTA,IAAI,GAAG;cAAEyC,SAAS,EAAE,CAAC;cAAEC,OAAO,EAAE,CAAC;cAAEC,YAAY,EAAE,CAAC;cAAEC,KAAK,EAAE;YAAE,CAAC;UAChE;;UAEA;UACA,MAAMC,MAAM,GAAGC,aAAa,CAACP,MAAM,CAACA,MAAM,CAAC;UAC3C,IAAIM,MAAM,IAAI,CAAC,EAAE7C,IAAI,CAACyC,SAAS,EAAE,MAC5B,IAAII,MAAM,KAAK,CAAC,EAAE7C,IAAI,CAAC0C,OAAO,EAAE,MAChC,IAAIG,MAAM,IAAI,CAAC,EAAE7C,IAAI,CAAC2C,YAAY,EAAE;UACzC3C,IAAI,CAAC4C,KAAK,EAAE;QACd;;QAEA;QACA,IAAIX,WAAW,IAAIM,MAAM,CAACC,UAAU,KAAKP,WAAW,CAACZ,EAAE,EAAE;UACvD,IAAI,CAACpB,GAAG,EAAE;YACRA,GAAG,GAAG;cAAE8C,SAAS,EAAE,CAAC;cAAEC,QAAQ,EAAE,CAAC;cAAEC,UAAU,EAAE,CAAC;cAAEL,KAAK,EAAE;YAAE,CAAC;UAC9D;UAEA,MAAMC,MAAM,GAAGK,QAAQ,CAACX,MAAM,CAACA,MAAM,CAAC,IAAI,CAAC;UAC3C,IAAIM,MAAM,IAAI,CAAC,EAAE5C,GAAG,CAAC8C,SAAS,EAAE,MAC3B,IAAIF,MAAM,IAAI,CAAC,EAAE5C,GAAG,CAAC+C,QAAQ,EAAE,MAC/B/C,GAAG,CAACgD,UAAU,EAAE;UACrBhD,GAAG,CAAC2C,KAAK,EAAE;QACb;;QAEA;QACA,IAAIV,WAAW,IAAIK,MAAM,CAACC,UAAU,KAAKN,WAAW,CAACb,EAAE,EAAE;UACvD,IAAI,CAACnB,GAAG,EAAE;YACRA,GAAG,GAAG;cAAE0C,KAAK,EAAE,CAAC;cAAEO,GAAG,EAAE,CAAC;cAAEC,KAAK,EAAE;YAAE,CAAC;UACtC;UAEA,MAAMP,MAAM,GAAGC,aAAa,CAACP,MAAM,CAACA,MAAM,CAAC;UAC3CrC,GAAG,CAACiD,GAAG,IAAIN,MAAM;UACjB3C,GAAG,CAACkD,KAAK,EAAE;QACb;;QAEA;QACA,IAAIjB,eAAe,IAAII,MAAM,CAACC,UAAU,KAAKL,eAAe,CAACd,EAAE,EAAE;UAC/D,MAAMgC,OAAO,GAAGzC,KAAK,CAACC,OAAO,CAAC0B,MAAM,CAACA,MAAM,CAAC,GACxCA,MAAM,CAACA,MAAM,GACb,CAACA,MAAM,CAACA,MAAM,CAAC;UACnBc,OAAO,CAACjB,OAAO,CAACkB,MAAM,IAAI;YACxB,IAAIA,MAAM,IAAIA,MAAM,CAACC,IAAI,CAAC,CAAC,EAAE;cAC3B,MAAMC,QAAQ,GAAGrD,WAAW,CAACyB,IAAI,CAAC6B,IAAI,IAAIA,IAAI,CAACC,IAAI,KAAKJ,MAAM,CAAC;cAC/D,IAAIE,QAAQ,EAAE;gBACZA,QAAQ,CAACJ,KAAK,EAAE;cAClB,CAAC,MAAM;gBACLjD,WAAW,CAACwD,IAAI,CAAC;kBAAED,IAAI,EAAEJ,MAAM;kBAAEF,KAAK,EAAE;gBAAE,CAAC,CAAC;cAC9C;YACF;UACF,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,IAAIpD,IAAI,EAAE;MACRA,IAAI,CAAC4D,UAAU,GACb5D,IAAI,CAAC4C,KAAK,GAAG,CAAC,GAAGiB,IAAI,CAACC,KAAK,CAAE9D,IAAI,CAACyC,SAAS,GAAGzC,IAAI,CAAC4C,KAAK,GAAI,GAAG,CAAC,GAAG,CAAC;IACxE;IAEA,IAAI3C,GAAG,EAAE;MACPA,GAAG,CAAC8D,KAAK,GACP9D,GAAG,CAAC2C,KAAK,GAAG,CAAC,GACTiB,IAAI,CAACC,KAAK,CAAE,CAAC7D,GAAG,CAAC8C,SAAS,GAAG9C,GAAG,CAACgD,UAAU,IAAIhD,GAAG,CAAC2C,KAAK,GAAI,GAAG,CAAC,GAChE,CAAC;IACT;IAEA,IAAI1C,GAAG,EAAE;MACPA,GAAG,CAAC6D,KAAK,GAAG7D,GAAG,CAACkD,KAAK,GAAG,CAAC,GAAG,CAAClD,GAAG,CAACiD,GAAG,GAAGjD,GAAG,CAACkD,KAAK,EAAEY,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;IAClE;IAEA/C,OAAO,CAACM,GAAG,CAAC,qBAAqB,EAAE;MAAEvB,IAAI;MAAEC,GAAG;MAAEC,GAAG;MAAEC;IAAY,CAAC,CAAC;IAEnE,OAAO;MAAEH,IAAI;MAAEC,GAAG;MAAEC,GAAG;MAAEC;IAAY,CAAC;EACxC,CAAC;;EAED;EACA,MAAM2C,aAAa,GAAGmB,UAAU,IAAI;IAClC,IAAI,CAACA,UAAU,EAAE,OAAO,CAAC;IACzB,MAAMC,KAAK,GAAGD,UAAU,CAACC,KAAK,CAAC,QAAQ,CAAC;IACxC,OAAOA,KAAK,GAAGhB,QAAQ,CAACgB,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;EACvC,CAAC;;EAED;EACA,MAAMC,MAAM,GAAG;IACb1B,SAAS,EAAE,SAAS;IACpBC,OAAO,EAAE,SAAS;IAClBC,YAAY,EAAE,SAAS;IACvBI,SAAS,EAAE,SAAS;IACpBE,UAAU,EAAE,SAAS;IACrBD,QAAQ,EAAE;EACZ,CAAC;EAED,MAAMoB,WAAW,GAAGL,KAAK,IAAI;IAC3B,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,SAAS,EAAC;IAClC,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,SAAS,EAAC;IAClC,OAAO,SAAS,EAAC;EACnB,CAAC;EAED,MAAMM,eAAe,GAAGA,CAAA,KAAM;IAC5B,IAAI,CAACvE,OAAO,CAACE,IAAI,EAAE,oBAAOf,OAAA;MAAKqF,SAAS,EAAC,SAAS;MAAAC,QAAA,EAAC;IAAmB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;IAE5E,MAAMC,IAAI,GAAG,CACX;MACElB,IAAI,EAAE,WAAW;MACjBmB,KAAK,EAAE/E,OAAO,CAACE,IAAI,CAACyC,SAAS;MAC7BqC,KAAK,EAAEX,MAAM,CAAC1B;IAChB,CAAC,EACD;MACEiB,IAAI,EAAE,aAAa;MACnBmB,KAAK,EAAE/E,OAAO,CAACE,IAAI,CAAC0C,OAAO;MAC3BoC,KAAK,EAAEX,MAAM,CAACzB;IAChB,CAAC,EACD;MACEgB,IAAI,EAAE,aAAa;MACnBmB,KAAK,EAAE/E,OAAO,CAACE,IAAI,CAAC2C,YAAY;MAChCmC,KAAK,EAAEX,MAAM,CAACxB;IAChB,CAAC,CACF,CAACoC,MAAM,CAACtB,IAAI,IAAIA,IAAI,CAACoB,KAAK,GAAG,CAAC,CAAC;IAEhC,oBACE5F,OAAA;MAAKqF,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1BtF,OAAA;QAAAsF,QAAA,EAAI;MAAkC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC3C1F,OAAA;QAAKqF,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BtF,OAAA;UAAKqF,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BtF,OAAA;YAAMqF,SAAS,EAAC,aAAa;YAAAC,QAAA,GAAEzE,OAAO,CAACE,IAAI,CAAC4D,UAAU,EAAC,GAAC;UAAA;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC/D1F,OAAA;YAAMqF,SAAS,EAAC,aAAa;YAAAC,QAAA,EAAC;UAAkB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpD,CAAC,eACN1F,OAAA;UAAKqF,SAAS,EAAC,iBAAiB;UAAAC,QAAA,eAC9BtF,OAAA,CAACX,mBAAmB;YAAC0G,KAAK,EAAC,MAAM;YAACC,MAAM,EAAE,GAAI;YAAAV,QAAA,eAC5CtF,OAAA,CAACd,QAAQ;cAAAoG,QAAA,gBACPtF,OAAA,CAACb,GAAG;gBACFwG,IAAI,EAAEA,IAAK;gBACXM,EAAE,EAAC,KAAK;gBACRC,EAAE,EAAC,KAAK;gBACRC,WAAW,EAAE,EAAG;gBAChBC,OAAO,EAAC,OAAO;gBACfC,KAAK,EAAEA,CAAC;kBAAE5B,IAAI;kBAAEmB;gBAAM,CAAC,KAAK,GAAGnB,IAAI,KAAKmB,KAAK,EAAG;gBAAAN,QAAA,EAE/CK,IAAI,CAACW,GAAG,CAAC,CAACC,KAAK,EAAEC,KAAK,kBACrBxG,OAAA,CAACZ,IAAI;kBAAuBqH,IAAI,EAAEF,KAAK,CAACV;gBAAM,GAAnC,QAAQW,KAAK,EAAE;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAsB,CACjD;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACN1F,OAAA,CAACL,OAAO;gBAAA4F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACN1F,OAAA;QAAKqF,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BtF,OAAA;UAAKqF,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BtF,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAC;UAAgB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACtD1F,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAEzE,OAAO,CAACE,IAAI,CAACyC;UAAS;YAAA+B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3D,CAAC,eACN1F,OAAA;UAAKqF,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BtF,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAC;UAAgB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACtD1F,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAEzE,OAAO,CAACE,IAAI,CAAC0C;UAAO;YAAA8B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzD,CAAC,eACN1F,OAAA;UAAKqF,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BtF,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAC;UAAkB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACxD1F,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAEzE,OAAO,CAACE,IAAI,CAAC2C;UAAY;YAAA6B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9D,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;EAED,MAAMgB,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAI,CAAC7F,OAAO,CAACG,GAAG,EAAE,oBAAOhB,OAAA;MAAKqF,SAAS,EAAC,SAAS;MAAAC,QAAA,EAAC;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;IAE1E,MAAMC,IAAI,GAAG,CACX;MACElB,IAAI,EAAE,YAAY;MAClBmB,KAAK,EAAE/E,OAAO,CAACG,GAAG,CAAC8C,SAAS;MAC5B+B,KAAK,EAAEX,MAAM,CAACpB;IAChB,CAAC,EACD;MAAEW,IAAI,EAAE,UAAU;MAAEmB,KAAK,EAAE/E,OAAO,CAACG,GAAG,CAAC+C,QAAQ;MAAE8B,KAAK,EAAEX,MAAM,CAACnB;IAAS,CAAC,EACzE;MACEU,IAAI,EAAE,YAAY;MAClBmB,KAAK,EAAE/E,OAAO,CAACG,GAAG,CAACgD,UAAU;MAC7B6B,KAAK,EAAEX,MAAM,CAAClB;IAChB,CAAC,CACF,CAAC8B,MAAM,CAACtB,IAAI,IAAIA,IAAI,CAACoB,KAAK,GAAG,CAAC,CAAC;IAEhC,MAAMe,QAAQ,GACZ9F,OAAO,CAACG,GAAG,CAAC8D,KAAK,IAAI,EAAE,GACnB,UAAU,GACVjE,OAAO,CAACG,GAAG,CAAC8D,KAAK,IAAI,EAAE,GACvB,SAAS,GACT,oBAAoB;IAE1B,oBACE9E,OAAA;MAAKqF,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1BtF,OAAA;QAAAsF,QAAA,EAAI;MAAwB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACjC1F,OAAA;QAAKqF,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BtF,OAAA;UAAKqF,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BtF,OAAA;YACEqF,SAAS,EAAC,aAAa;YACvBuB,KAAK,EAAE;cAAEf,KAAK,EAAEV,WAAW,CAACtE,OAAO,CAACG,GAAG,CAAC8D,KAAK;YAAE,CAAE;YAAAQ,QAAA,EAEhDzE,OAAO,CAACG,GAAG,CAAC8D;UAAK;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACd,CAAC,eACP1F,OAAA;YAAMqF,SAAS,EAAC,aAAa;YAAAC,QAAA,GAAEqB,QAAQ,EAAC,yDAAU;UAAA;YAAApB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtD,CAAC,eACN1F,OAAA;UAAKqF,SAAS,EAAC,iBAAiB;UAAAC,QAAA,eAC9BtF,OAAA,CAACX,mBAAmB;YAAC0G,KAAK,EAAC,MAAM;YAACC,MAAM,EAAE,GAAI;YAAAV,QAAA,eAC5CtF,OAAA,CAACd,QAAQ;cAAAoG,QAAA,gBACPtF,OAAA,CAACb,GAAG;gBACFwG,IAAI,EAAEA,IAAK;gBACXM,EAAE,EAAC,KAAK;gBACRC,EAAE,EAAC,KAAK;gBACRC,WAAW,EAAE,EAAG;gBAChBC,OAAO,EAAC,OAAO;gBACfC,KAAK,EAAEA,CAAC;kBAAE5B,IAAI;kBAAEmB;gBAAM,CAAC,KAAK,GAAGnB,IAAI,KAAKmB,KAAK,EAAG;gBAAAN,QAAA,EAE/CK,IAAI,CAACW,GAAG,CAAC,CAACC,KAAK,EAAEC,KAAK,kBACrBxG,OAAA,CAACZ,IAAI;kBAAuBqH,IAAI,EAAEF,KAAK,CAACV;gBAAM,GAAnC,QAAQW,KAAK,EAAE;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAsB,CACjD;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACN1F,OAAA,CAACL,OAAO;gBAAA4F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACN1F,OAAA;QAAKqF,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BtF,OAAA;UAAKqF,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BtF,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAC;UAAkB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACxD1F,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAEzE,OAAO,CAACG,GAAG,CAAC8C;UAAS;YAAAyB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,eACN1F,OAAA;UAAKqF,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BtF,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAC;UAAe;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACrD1F,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAEzE,OAAO,CAACG,GAAG,CAAC+C;UAAQ;YAAAwB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzD,CAAC,eACN1F,OAAA;UAAKqF,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BtF,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAC;UAAiB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACvD1F,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAEzE,OAAO,CAACG,GAAG,CAACgD;UAAU;YAAAuB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3D,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;EAED,MAAMmB,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAI,CAAChG,OAAO,CAACI,GAAG,EAAE,oBAAOjB,OAAA;MAAKqF,SAAS,EAAC,SAAS;MAAAC,QAAA,EAAC;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;IAE1E,MAAMoB,QAAQ,GACZjG,OAAO,CAACI,GAAG,CAAC6D,KAAK,IAAI,CAAC,GAClB,SAAS,GACTjE,OAAO,CAACI,GAAG,CAAC6D,KAAK,IAAI,CAAC,GACtB,QAAQ,GACRjE,OAAO,CAACI,GAAG,CAAC6D,KAAK,IAAI,CAAC,GACtB,mBAAmB,GACnB,OAAO;IAEb,MAAMiC,QAAQ,GACZlG,OAAO,CAACI,GAAG,CAAC6D,KAAK,IAAI,CAAC,GAClB,SAAS,GACTjE,OAAO,CAACI,GAAG,CAAC6D,KAAK,IAAI,CAAC,GACtB,SAAS,GACTjE,OAAO,CAACI,GAAG,CAAC6D,KAAK,IAAI,CAAC,GACtB,SAAS,GACT,SAAS;IAEf,oBACE9E,OAAA;MAAKqF,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1BtF,OAAA;QAAAsF,QAAA,EAAI;MAA2B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACpC1F,OAAA;QAAKqF,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BtF,OAAA;UAAKqF,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BtF,OAAA;YAAMqF,SAAS,EAAC,aAAa;YAACuB,KAAK,EAAE;cAAEf,KAAK,EAAEkB;YAAS,CAAE;YAAAzB,QAAA,EACtDzE,OAAO,CAACI,GAAG,CAAC6D;UAAK;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACd,CAAC,eACP1F,OAAA;YAAMqF,SAAS,EAAC,aAAa;YAAAC,QAAA,EAAEwB;UAAQ;YAAAvB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eACN1F,OAAA;UAAKqF,SAAS,EAAC,WAAW;UAAAC,QAAA,gBACxBtF,OAAA;YAAKqF,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBtF,OAAA;cAAKqF,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACrC1F,OAAA;cAAKqF,SAAS,EAAC,aAAa;cAAAC,QAAA,EAAC;YAAW;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3C,CAAC,eACN1F,OAAA;YAAKqF,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBtF,OAAA;cAAKqF,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACrC1F,OAAA;cAAKqF,SAAS,EAAC,aAAa;cAAAC,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C,CAAC,eACN1F,OAAA;YAAKqF,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBtF,OAAA;cAAKqF,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACrC1F,OAAA;cAAKqF,SAAS,EAAC,aAAa;cAAAC,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1C,CAAC,eACN1F,OAAA;YAAKqF,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBtF,OAAA;cAAKqF,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACrC1F,OAAA;cAAKqF,SAAS,EAAC,aAAa;cAAAC,QAAA,EAAC;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CAAC,eACN1F,OAAA;YAAKqF,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBtF,OAAA;cAAKqF,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACrC1F,OAAA;cAAKqF,SAAS,EAAC,aAAa;cAAAC,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C,CAAC,eACN1F,OAAA;YACEqF,SAAS,EAAC,iBAAiB;YAC3BuB,KAAK,EAAE;cACLI,IAAI,EAAE,GAAI,CAACnG,OAAO,CAACI,GAAG,CAAC6D,KAAK,GAAG,CAAC,IAAI,CAAC,GAAI,GAAG,GAAG;cAC/CmC,eAAe,EAAEF;YACnB;UAAE;YAAAxB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACN1F,OAAA;QAAKqF,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BtF,OAAA;UAAAsF,QAAA,EAAG;QAGH;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACJ1F,OAAA;UAAKqF,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BtF,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAC;UAAmB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACzD1F,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAEzE,OAAO,CAACI,GAAG,CAACkD;UAAK;YAAAoB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;EAED,MAAMwB,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAI,CAACrG,OAAO,CAACK,WAAW,CAACY,MAAM,EAC7B,oBAAO9B,OAAA;MAAKqF,SAAS,EAAC,SAAS;MAAAC,QAAA,EAAC;IAAsB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;IAE9D,oBACE1F,OAAA;MAAKqF,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1BtF,OAAA;QAAAsF,QAAA,EAAI;MAAyB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClC1F,OAAA;QAAKqF,SAAS,EAAC,iBAAiB;QAAAC,QAAA,eAC9BtF,OAAA,CAACX,mBAAmB;UAAC0G,KAAK,EAAC,MAAM;UAACC,MAAM,EAAE,GAAI;UAAAV,QAAA,eAC5CtF,OAAA,CAACV,QAAQ;YACPqG,IAAI,EAAE9E,OAAO,CAACK,WAAY;YAC1BiG,MAAM,EAAE;cAAEC,GAAG,EAAE,EAAE;cAAEC,KAAK,EAAE,EAAE;cAAEL,IAAI,EAAE,EAAE;cAAEM,MAAM,EAAE;YAAE,CAAE;YAAAhC,QAAA,gBAEpDtF,OAAA,CAACN,aAAa;cAAC6H,eAAe,EAAC;YAAK;cAAAhC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACvC1F,OAAA,CAACR,KAAK;cAAC4G,OAAO,EAAC;YAAM;cAAAb,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACxB1F,OAAA,CAACP,KAAK;cAAA8F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACT1F,OAAA,CAACL,OAAO;cAAA4F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACX1F,OAAA,CAACT,GAAG;cAAC6G,OAAO,EAAC,OAAO;cAACK,IAAI,EAAC;YAAS;cAAAlB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9B;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;EAED,oBACE1F,OAAA;IAAKqF,SAAS,EAAC,qBAAqB;IAAAC,QAAA,gBAClCtF,OAAA,CAACjB,OAAO;MAACqC,IAAI,EAAEjB;IAAY;MAAAoF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC9B1F,OAAA;MAAKqF,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAChCtF,OAAA;QAAKqF,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAC5BtF,OAAA;UAAAsF,QAAA,EAAI;QAAwB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjC1F,OAAA;UAAKqF,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9BtF,OAAA;YAAOwH,OAAO,EAAC,eAAe;YAAAlC,QAAA,EAAC;UAAkB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACzD1F,OAAA;YACEoC,EAAE,EAAC,eAAe;YAClBwD,KAAK,EAAE,CAAArF,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE6B,EAAE,KAAI,EAAG;YAChCqF,QAAQ,EAAEC,CAAC,IAAI;cACb,MAAMzF,MAAM,GAAG5B,OAAO,CAACsC,IAAI,CACzBgF,CAAC,IAAIA,CAAC,CAACvF,EAAE,KAAK6B,QAAQ,CAACyD,CAAC,CAACE,MAAM,CAAChC,KAAK,CACvC,CAAC;cACD,IAAI3D,MAAM,EAAEF,kBAAkB,CAACE,MAAM,CAAC;YACxC,CAAE;YAAAqD,QAAA,gBAEFtF,OAAA;cAAQ4F,KAAK,EAAC,EAAE;cAAAN,QAAA,EAAC;YAAiB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EAC1CrF,OAAO,CAACiG,GAAG,CAACrE,MAAM,iBACjBjC,OAAA;cAAwB4F,KAAK,EAAE3D,MAAM,CAACG,EAAG;cAAAkD,QAAA,EACtCrD,MAAM,CAAC4F;YAAK,GADF5F,MAAM,CAACG,EAAE;cAAAmD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEd,CACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAELjF,OAAO,gBACNT,OAAA;QAAKqF,SAAS,EAAC,mBAAmB;QAAAC,QAAA,EAAC;MAAkB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,GACzD/E,KAAK,gBACPX,OAAA;QAAKqF,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAE3E;MAAK;QAAA4E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,GAC1C,CAACnF,cAAc,gBACjBP,OAAA;QAAKqF,SAAS,EAAC,iBAAiB;QAAAC,QAAA,EAAC;MAA6B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,gBAEpE1F,OAAA;QAAKqF,SAAS,EAAC,mBAAmB;QAAAC,QAAA,eAChCtF,OAAA;UAAKqF,SAAS,EAAC,cAAc;UAAAC,QAAA,GAC1BF,eAAe,CAAC,CAAC,EACjBsB,cAAc,CAAC,CAAC,EAChBG,cAAc,CAAC,CAAC,EAChBK,kBAAkB,CAAC,CAAC;QAAA;UAAA3B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAAxF,EAAA,CA/fKD,UAAU;EAAA,QAYGnB,WAAW;AAAA;AAAAgJ,EAAA,GAZxB7H,UAAU;AAigBhB,eAAeA,UAAU;AAAA,IAAA6H,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}