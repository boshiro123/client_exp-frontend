{"ast":null,"code":"var _jsxFileName = \"/Users/shirokiy/Desktop/Repositories/\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u044B/ClientExp/client_exp-frontend/src/pages/Issues/IssuesPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Sidebar from \"../../components/common/Sidebar\";\nimport { authService } from \"../../api/auth\";\nimport { surveyService } from \"../../api/survey\";\nimport \"./IssuesPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IssuesPage = () => {\n  _s();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [surveys, setSurveys] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const user = authService.getCurrentUser();\n    if (!user || user.role !== \"ADMIN\" && user.role !== \"MANAGER\") {\n      navigate(\"/login\");\n      return;\n    }\n    setCurrentUser(user);\n\n    // Загрузка опросников и их рейтингов\n    const loadSurveysWithRatings = async () => {\n      try {\n        setLoading(true);\n        console.log(\"Начинаем загрузку опросников...\");\n        // Получаем все опросники\n        const surveysResponse = await surveyService.getAllSurveys();\n        console.log(\"Ответ API опросников:\", surveysResponse);\n\n        // Проверяем формат данных и преобразуем в массив при необходимости\n        let surveysData = [];\n        if (Array.isArray(surveysResponse)) {\n          surveysData = surveysResponse;\n        } else if (surveysResponse && typeof surveysResponse === \"object\") {\n          // Проверяем различные возможные структуры ответа\n          if (Array.isArray(surveysResponse.content)) {\n            surveysData = surveysResponse.content;\n          } else if (Array.isArray(surveysResponse.data)) {\n            surveysData = surveysResponse.data;\n          } else if (Array.isArray(surveysResponse.items)) {\n            surveysData = surveysResponse.items;\n          } else if (Array.isArray(surveysResponse.surveys)) {\n            surveysData = surveysResponse.surveys;\n          } else {\n            console.error(\"Неподдерживаемая структура данных:\", surveysResponse);\n            setError(\"Неподдерживаемый формат данных от API\");\n            setLoading(false);\n            return;\n          }\n        } else {\n          console.error(\"Неподдерживаемый тип данных:\", typeof surveysResponse);\n          setError(\"Некорректный ответ от API\");\n          setLoading(false);\n          return;\n        }\n        console.log(\"Обработанные данные опросников:\", surveysData);\n\n        // Для каждого опросника получаем ответы и вычисляем средний рейтинг\n        const surveysWithRatings = await Promise.all(surveysData.map(async survey => {\n          try {\n            console.log(`Начинаем обработку ответов для опросника ${survey.id}`);\n            // Получаем ответы на опросник\n            const responsesData = await surveyService.getSurveyResponses(survey.id);\n            console.log(`Сырые данные ответов для опросника ${survey.id}:`, responsesData);\n\n            // Проверяем формат данных ответов\n            let responses = [];\n            if (Array.isArray(responsesData)) {\n              responses = responsesData;\n            } else if (responsesData && typeof responsesData === \"object\") {\n              if (Array.isArray(responsesData.content)) {\n                responses = responsesData.content;\n              } else if (Array.isArray(responsesData.data)) {\n                responses = responsesData.data;\n              } else if (Array.isArray(responsesData.responses)) {\n                responses = responsesData.responses;\n              } else {\n                console.warn(`Неподдерживаемая структура данных ответов для опросника ${survey.id}:`, responsesData);\n                responses = [];\n              }\n            }\n            console.log(`Ответы для опросника ${survey.id}:`, responses);\n\n            // Находим среди ответов те, которые относятся к вопросам типа RATING\n            let ratingSum = 0;\n            let ratingCount = 0;\n\n            // Перебираем все ответы и находим рейтинговые вопросы\n            responses.forEach(response => {\n              if (response.answers && Array.isArray(response.answers)) {\n                // Обрабатываем ответы\n                response.answers.forEach(answer => {\n                  // Ищем ответы с числовым значением (numericAnswer)\n                  if (answer.numericAnswer !== null && answer.numericAnswer !== undefined) {\n                    // Добавляем значение в сумму\n                    ratingSum += parseInt(answer.numericAnswer, 10);\n                    ratingCount++;\n                    console.log(`Найден числовой ответ: ${answer.numericAnswer}, вопрос ID: ${answer.questionId}`);\n                  }\n                });\n              }\n            });\n\n            // Выводим информацию о результатах подсчета\n            console.log(`Опросник ${survey.id}: рейтинг ${ratingSum}/${ratingCount}, средний: ${ratingCount > 0 ? ratingSum / ratingCount : 0}`);\n\n            // Вычисляем средний рейтинг\n            const averageRating = ratingCount > 0 ? ratingSum / ratingCount : 0;\n\n            // Определяем уровень проблемности на основе среднего рейтинга\n            let issueLevel = \"низкий\";\n            if (averageRating <= 3) {\n              issueLevel = \"высокий\";\n            } else if (averageRating <= 6) {\n              issueLevel = \"средний\";\n            }\n            return {\n              ...survey,\n              averageRating: averageRating.toFixed(1),\n              issueLevel,\n              responseCount: responses.length\n            };\n          } catch (error) {\n            console.error(`Ошибка при получении ответов для опросника ${survey.id}:`, error);\n            return {\n              ...survey,\n              averageRating: \"Н/Д\",\n              issueLevel: \"неизвестно\",\n              responseCount: 0\n            };\n          }\n        }));\n        setSurveys(surveysWithRatings);\n        setLoading(false);\n      } catch (error) {\n        console.error(\"Ошибка при загрузке опросников:\", error);\n        setError(\"Не удалось загрузить данные опросников\");\n        setLoading(false);\n      }\n    };\n    loadSurveysWithRatings();\n  }, [navigate]);\n\n  // Функция для получения класса на основе уровня проблемности\n  const getIssueLevelClass = level => {\n    switch (level) {\n      case \"высокий\":\n        return \"issue-level-high\";\n      case \"средний\":\n        return \"issue-level-medium\";\n      case \"низкий\":\n        return \"issue-level-low\";\n      default:\n        return \"issue-level-unknown\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      user: currentUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"issues-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u043D\\u044B\\u0435 \\u043C\\u0435\\u0441\\u0442\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-indicator\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this) : surveys.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-data-message\",\n        children: \"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A\\u043E\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"issues-table-container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"issues-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0421\\u0440\\u0435\\u0434\\u043D\\u044F\\u044F \\u043E\\u0446\\u0435\\u043D\\u043A\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0423\\u0440\\u043E\\u0432\\u0435\\u043D\\u044C \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u043D\\u043E\\u0441\\u0442\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: surveys.map(survey => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: survey.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: survey.averageRating\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `issue-level ${getIssueLevelClass(survey.issueLevel)}`,\n                  children: survey.issueLevel\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: survey.responseCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this)]\n            }, survey.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n};\n_s(IssuesPage, \"emDTe9NzI7cc2TeGcuDiKg5kTnI=\", false, function () {\n  return [useNavigate];\n});\n_c = IssuesPage;\nexport default IssuesPage;\nvar _c;\n$RefreshReg$(_c, \"IssuesPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Sidebar","authService","surveyService","jsxDEV","_jsxDEV","IssuesPage","_s","currentUser","setCurrentUser","surveys","setSurveys","loading","setLoading","error","setError","navigate","user","getCurrentUser","role","loadSurveysWithRatings","console","log","surveysResponse","getAllSurveys","surveysData","Array","isArray","content","data","items","surveysWithRatings","Promise","all","map","survey","id","responsesData","getSurveyResponses","responses","warn","ratingSum","ratingCount","forEach","response","answers","answer","numericAnswer","undefined","parseInt","questionId","averageRating","issueLevel","toFixed","responseCount","length","getIssueLevelClass","level","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","_c","$RefreshReg$"],"sources":["/Users/shirokiy/Desktop/Repositories/Дипломы/ClientExp/client_exp-frontend/src/pages/Issues/IssuesPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport Sidebar from \"../../components/common/Sidebar\"\nimport { authService } from \"../../api/auth\"\nimport { surveyService } from \"../../api/survey\"\nimport \"./IssuesPage.css\"\n\nconst IssuesPage = () => {\n  const [currentUser, setCurrentUser] = useState(null)\n  const [surveys, setSurveys] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    const user = authService.getCurrentUser()\n    if (!user || (user.role !== \"ADMIN\" && user.role !== \"MANAGER\")) {\n      navigate(\"/login\")\n      return\n    }\n    setCurrentUser(user)\n\n    // Загрузка опросников и их рейтингов\n    const loadSurveysWithRatings = async () => {\n      try {\n        setLoading(true)\n        console.log(\"Начинаем загрузку опросников...\")\n        // Получаем все опросники\n        const surveysResponse = await surveyService.getAllSurveys()\n        console.log(\"Ответ API опросников:\", surveysResponse)\n\n        // Проверяем формат данных и преобразуем в массив при необходимости\n        let surveysData = []\n\n        if (Array.isArray(surveysResponse)) {\n          surveysData = surveysResponse\n        } else if (surveysResponse && typeof surveysResponse === \"object\") {\n          // Проверяем различные возможные структуры ответа\n          if (Array.isArray(surveysResponse.content)) {\n            surveysData = surveysResponse.content\n          } else if (Array.isArray(surveysResponse.data)) {\n            surveysData = surveysResponse.data\n          } else if (Array.isArray(surveysResponse.items)) {\n            surveysData = surveysResponse.items\n          } else if (Array.isArray(surveysResponse.surveys)) {\n            surveysData = surveysResponse.surveys\n          } else {\n            console.error(\"Неподдерживаемая структура данных:\", surveysResponse)\n            setError(\"Неподдерживаемый формат данных от API\")\n            setLoading(false)\n            return\n          }\n        } else {\n          console.error(\"Неподдерживаемый тип данных:\", typeof surveysResponse)\n          setError(\"Некорректный ответ от API\")\n          setLoading(false)\n          return\n        }\n\n        console.log(\"Обработанные данные опросников:\", surveysData)\n\n        // Для каждого опросника получаем ответы и вычисляем средний рейтинг\n        const surveysWithRatings = await Promise.all(\n          surveysData.map(async survey => {\n            try {\n              console.log(\n                `Начинаем обработку ответов для опросника ${survey.id}`\n              )\n              // Получаем ответы на опросник\n              const responsesData = await surveyService.getSurveyResponses(\n                survey.id\n              )\n              console.log(\n                `Сырые данные ответов для опросника ${survey.id}:`,\n                responsesData\n              )\n\n              // Проверяем формат данных ответов\n              let responses = []\n              if (Array.isArray(responsesData)) {\n                responses = responsesData\n              } else if (responsesData && typeof responsesData === \"object\") {\n                if (Array.isArray(responsesData.content)) {\n                  responses = responsesData.content\n                } else if (Array.isArray(responsesData.data)) {\n                  responses = responsesData.data\n                } else if (Array.isArray(responsesData.responses)) {\n                  responses = responsesData.responses\n                } else {\n                  console.warn(\n                    `Неподдерживаемая структура данных ответов для опросника ${survey.id}:`,\n                    responsesData\n                  )\n                  responses = []\n                }\n              }\n\n              console.log(`Ответы для опросника ${survey.id}:`, responses)\n\n              // Находим среди ответов те, которые относятся к вопросам типа RATING\n              let ratingSum = 0\n              let ratingCount = 0\n\n              // Перебираем все ответы и находим рейтинговые вопросы\n              responses.forEach(response => {\n                if (response.answers && Array.isArray(response.answers)) {\n                  // Обрабатываем ответы\n                  response.answers.forEach(answer => {\n                    // Ищем ответы с числовым значением (numericAnswer)\n                    if (\n                      answer.numericAnswer !== null &&\n                      answer.numericAnswer !== undefined\n                    ) {\n                      // Добавляем значение в сумму\n                      ratingSum += parseInt(answer.numericAnswer, 10)\n                      ratingCount++\n                      console.log(\n                        `Найден числовой ответ: ${answer.numericAnswer}, вопрос ID: ${answer.questionId}`\n                      )\n                    }\n                  })\n                }\n              })\n\n              // Выводим информацию о результатах подсчета\n              console.log(\n                `Опросник ${\n                  survey.id\n                }: рейтинг ${ratingSum}/${ratingCount}, средний: ${\n                  ratingCount > 0 ? ratingSum / ratingCount : 0\n                }`\n              )\n\n              // Вычисляем средний рейтинг\n              const averageRating =\n                ratingCount > 0 ? ratingSum / ratingCount : 0\n\n              // Определяем уровень проблемности на основе среднего рейтинга\n              let issueLevel = \"низкий\"\n              if (averageRating <= 3) {\n                issueLevel = \"высокий\"\n              } else if (averageRating <= 6) {\n                issueLevel = \"средний\"\n              }\n\n              return {\n                ...survey,\n                averageRating: averageRating.toFixed(1),\n                issueLevel,\n                responseCount: responses.length,\n              }\n            } catch (error) {\n              console.error(\n                `Ошибка при получении ответов для опросника ${survey.id}:`,\n                error\n              )\n              return {\n                ...survey,\n                averageRating: \"Н/Д\",\n                issueLevel: \"неизвестно\",\n                responseCount: 0,\n              }\n            }\n          })\n        )\n\n        setSurveys(surveysWithRatings)\n        setLoading(false)\n      } catch (error) {\n        console.error(\"Ошибка при загрузке опросников:\", error)\n        setError(\"Не удалось загрузить данные опросников\")\n        setLoading(false)\n      }\n    }\n\n    loadSurveysWithRatings()\n  }, [navigate])\n\n  // Функция для получения класса на основе уровня проблемности\n  const getIssueLevelClass = level => {\n    switch (level) {\n      case \"высокий\":\n        return \"issue-level-high\"\n      case \"средний\":\n        return \"issue-level-medium\"\n      case \"низкий\":\n        return \"issue-level-low\"\n      default:\n        return \"issue-level-unknown\"\n    }\n  }\n\n  return (\n    <div className=\"dashboard-container\">\n      <Sidebar user={currentUser} />\n      <div className=\"dashboard-content\">\n        <div className=\"issues-header\">\n          <h1>Проблемные места</h1>\n        </div>\n\n        {loading ? (\n          <div className=\"loading-indicator\">Загрузка данных...</div>\n        ) : error ? (\n          <div className=\"error-message\">{error}</div>\n        ) : surveys.length === 0 ? (\n          <div className=\"no-data-message\">Нет доступных опросников</div>\n        ) : (\n          <div className=\"issues-table-container\">\n            <table className=\"issues-table\">\n              <thead>\n                <tr>\n                  <th>Название опросника</th>\n                  <th>Средняя оценка</th>\n                  <th>Уровень проблемности</th>\n                  <th>Количество ответов</th>\n                </tr>\n              </thead>\n              <tbody>\n                {surveys.map(survey => (\n                  <tr key={survey.id}>\n                    <td>{survey.title}</td>\n                    <td>{survey.averageRating}</td>\n                    <td>\n                      <span\n                        className={`issue-level ${getIssueLevelClass(\n                          survey.issueLevel\n                        )}`}\n                      >\n                        {survey.issueLevel}\n                      </span>\n                    </td>\n                    <td>{survey.responseCount}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default IssuesPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}