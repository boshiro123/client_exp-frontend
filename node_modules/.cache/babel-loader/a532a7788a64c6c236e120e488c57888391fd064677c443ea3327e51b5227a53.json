{"ast":null,"code":"var _jsxFileName = \"/Users/shirokiy/Desktop/Repositories/\\u0414\\u0438\\u043F\\u043B\\u043E\\u043C\\u044B/ClientExp/client_exp-frontend/src/pages/Survey/SurveyPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport { surveyService } from \"../../api/survey\";\nimport { authService } from \"../../api/auth\";\nimport \"./SurveyStyles.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SurveyPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [isPreview, setIsPreview] = useState(false);\n  const [survey, setSurvey] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answers, setAnswers] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [respondentData, setRespondentData] = useState({\n    email: \"\",\n    consent: false\n  });\n  useEffect(() => {\n    // Проверяем, является ли это предпросмотром от администратора\n    const checkIfPreview = async () => {\n      const user = authService.getCurrentUser();\n      const isAdmin = user && (user.role === \"ADMIN\" || user.role === \"MANAGER\");\n      setIsPreview(isAdmin);\n      fetchSurvey(isAdmin);\n    };\n    checkIfPreview();\n  }, [id]);\n  const fetchSurvey = async isAdmin => {\n    try {\n      setLoading(true);\n\n      // Выбор метода API в зависимости от того, предпросмотр это или нет\n      let surveyData;\n\n      // Если это предпросмотр администратора, используем метод с авторизацией\n      if (isAdmin) {\n        surveyData = await surveyService.getSurveyById(id);\n      } else {\n        surveyData = await surveyService.getPublicSurveyById(id);\n      }\n      console.log(\"Получены данные опросника:\", surveyData);\n      if (!surveyData) {\n        setError(\"Опросник не найден или недоступен\");\n        setLoading(false);\n        return;\n      }\n\n      // Проверка статуса нужна только если это не предпросмотр\n      if (!isAdmin && surveyData.status !== \"ACTIVE\" && surveyData.status !== \"активный\") {\n        setError(`Опросник в данный момент недоступен (статус: ${surveyData.status})`);\n        setLoading(false);\n        return;\n      }\n      setSurvey(surveyData);\n\n      // Инициализируем ответы для обязательных вопросов\n      const initialAnswers = {};\n      surveyData.questions.forEach(question => {\n        if (question.required) {\n          initialAnswers[question.id] = question.type === \"MULTIPLE_CHOICE\" ? [] : question.type === \"TEXT\" ? \"\" : null;\n        }\n      });\n      setAnswers(initialAnswers);\n      setLoading(false);\n    } catch (err) {\n      console.error(\"Ошибка при загрузке опросника:\", err);\n      setError(\"Не удалось загрузить опросник. Возможно, он был удален или недоступен.\");\n      setLoading(false);\n    }\n  };\n  const handleAnswerChange = (questionId, value) => {\n    const question = survey.questions.find(q => q.id === questionId);\n    if (question.type === \"MULTIPLE_CHOICE\") {\n      const currentAnswers = answers[questionId] || [];\n      if (currentAnswers.includes(value)) {\n        // Если значение уже выбрано, удаляем его\n        setAnswers({\n          ...answers,\n          [questionId]: currentAnswers.filter(item => item !== value)\n        });\n      } else {\n        // Иначе добавляем новое значение\n        setAnswers({\n          ...answers,\n          [questionId]: [...currentAnswers, value]\n        });\n      }\n    } else {\n      // Для одиночного выбора, текста и оценки\n      setAnswers({\n        ...answers,\n        [questionId]: value\n      });\n    }\n  };\n  const handleRespondentDataChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setRespondentData({\n      ...respondentData,\n      [name]: type === \"checkbox\" ? checked : value\n    });\n  };\n  const nextQuestion = () => {\n    const currentQuestion = survey.questions[currentQuestionIndex];\n\n    // Проверяем, дан ли ответ на обязательный вопрос\n    if (currentQuestion.required) {\n      const answer = answers[currentQuestion.id];\n      if (answer === null || answer === undefined || Array.isArray(answer) && answer.length === 0 || typeof answer === \"string\" && answer.trim() === \"\") {\n        alert(\"Пожалуйста, ответьте на вопрос, прежде чем продолжить.\");\n        return;\n      }\n    }\n    if (currentQuestionIndex < survey.questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n      window.scrollTo(0, 0);\n    }\n  };\n  const prevQuestion = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\n      window.scrollTo(0, 0);\n    }\n  };\n  const validateForm = () => {\n    // Проверяем, есть ли ответы на все обязательные вопросы\n    const unansweredRequired = survey.questions.filter(q => q.required).some(q => {\n      const answer = answers[q.id];\n      return answer === null || answer === undefined || Array.isArray(answer) && answer.length === 0 || typeof answer === \"string\" && answer.trim() === \"\";\n    });\n    if (unansweredRequired) {\n      alert(\"Пожалуйста, ответьте на все обязательные вопросы.\");\n      return false;\n    }\n\n    // Проверяем согласие на обработку данных\n    if (!respondentData.consent) {\n      alert(\"Для завершения опроса необходимо согласие на обработку данных.\");\n      return false;\n    }\n    return true;\n  };\n  const submitSurvey = async () => {\n    if (!validateForm()) return;\n    try {\n      setSubmitting(true);\n      const surveyResponse = {\n        surveyId: survey.id,\n        respondent: {\n          email: respondentData.email || \"anonymous\",\n          consent: respondentData.consent\n        },\n        answers: Object.entries(answers).map(([questionId, value]) => ({\n          questionId: parseInt(questionId),\n          answer: value\n        }))\n      };\n      console.log(\"Отправка ответов:\", surveyResponse);\n      await surveyService.submitSurveyResponse(surveyResponse);\n      setSubmitted(true);\n      window.scrollTo(0, 0);\n    } catch (err) {\n      console.error(\"Ошибка при отправке ответов:\", err);\n      alert(\"Произошла ошибка при отправке ответов. Пожалуйста, попробуйте еще раз.\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const renderQuestionContent = question => {\n    switch (question.type) {\n      case \"SINGLE_CHOICE\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-options\",\n          children: question.options.map((option, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"option-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: `question_${question.id}`,\n              value: option,\n              checked: answers[question.id] === option,\n              onChange: () => handleAnswerChange(question.id, option)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: option\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this);\n      case \"MULTIPLE_CHOICE\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-options\",\n          children: question.options.map((option, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"option-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: `question_${question.id}_${index}`,\n              value: option,\n              checked: (answers[question.id] || []).includes(option),\n              onChange: () => handleAnswerChange(question.id, option)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: option\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this);\n      case \"TEXT\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-text\",\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"text-answer\",\n            value: answers[question.id] || \"\",\n            onChange: e => handleAnswerChange(question.id, e.target.value),\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043E\\u0442\\u0432\\u0435\\u0442 \\u0437\\u0434\\u0435\\u0441\\u044C...\",\n            rows: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this);\n      case \"RATING\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rating-container\",\n          children: [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(rating => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `rating-button ${answers[question.id] === rating ? \"selected\" : \"\"}`,\n            onClick: () => handleAnswerChange(question.id, rating),\n            children: rating\n          }, rating, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rating-labels\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u041E\\u0447\\u0435\\u043D\\u044C \\u043F\\u043B\\u043E\\u0445\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u041E\\u0442\\u043B\\u0438\\u0447\\u043D\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u0435\\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u043C\\u044B\\u0439 \\u0442\\u0438\\u043F \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u0430.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"survey-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-indicator\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"survey-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: () => navigate(\"/\"),\n          children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this);\n  }\n  if (!survey) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"survey-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u041E\\u043F\\u0440\\u043E\\u0441\\u043D\\u0438\\u043A \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: () => navigate(\"/\"),\n          children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this);\n  }\n  if (submitted) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"survey-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-icon\",\n          children: \"\\u2713\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0421\\u043F\\u0430\\u0441\\u0438\\u0431\\u043E \\u0437\\u0430 \\u0443\\u0447\\u0430\\u0441\\u0442\\u0438\\u0435 \\u0432 \\u043E\\u043F\\u0440\\u043E\\u0441\\u0435!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0412\\u0430\\u0448\\u0438 \\u043E\\u0442\\u0432\\u0435\\u0442\\u044B \\u043F\\u043E\\u043C\\u043E\\u0433\\u0443\\u0442 \\u043D\\u0430\\u043C \\u0443\\u043B\\u0443\\u0447\\u0448\\u0438\\u0442\\u044C \\u043D\\u0430\\u0448 \\u0441\\u0435\\u0440\\u0432\\u0438\\u0441.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-button\",\n          onClick: () => navigate(\"/\"),\n          children: \"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this);\n  }\n  const currentQuestion = survey.questions[currentQuestionIndex];\n  const isLastQuestion = currentQuestionIndex === survey.questions.length - 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"survey-container\",\n    children: [isPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview-notification\",\n      children: [\"\\u0412\\u044B \\u043F\\u0440\\u043E\\u0441\\u043C\\u0430\\u0442\\u0440\\u0438\\u0432\\u0430\\u0435\\u0442\\u0435 \\u043E\\u043F\\u0440\\u043E\\u0441 \\u0432 \\u0440\\u0435\\u0436\\u0438\\u043C\\u0435 \\u043F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430\", /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-to-dashboard\",\n        onClick: () => navigate(\"/dashboard\"),\n        children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u0432 \\u043F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"survey-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: survey.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), survey.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"survey-description\",\n        children: survey.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"survey-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-fill\",\n          style: {\n            width: `${(currentQuestionIndex + 1) / survey.questions.length * 100}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-text\",\n        children: [\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 \", currentQuestionIndex + 1, \" \\u0438\\u0437 \", survey.questions.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"question-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"question-text\",\n          children: [currentQuestion.text, currentQuestion.required && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"required-mark\",\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this), renderQuestionContent(currentQuestion)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), isLastQuestion && !isPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"respondent-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\\u0438\\u0435 \\u043E\\u043F\\u0440\\u043E\\u0441\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"form-note\",\n          children: \"\\u041E\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 email, \\u0435\\u0441\\u043B\\u0438 \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E \\u043E \\u043D\\u0430\\u0448\\u0438\\u0445 \\u0443\\u0441\\u043B\\u0443\\u0433\\u0430\\u0445.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            value: respondentData.email,\n            onChange: handleRespondentDataChange,\n            placeholder: \"example@mail.ru\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group checkbox-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: \"consent\",\n            name: \"consent\",\n            checked: respondentData.consent,\n            onChange: handleRespondentDataChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"consent\",\n            children: [\"\\u042F \\u0434\\u0430\\u044E \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0435 \\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0443 \\u043C\\u043E\\u0438\\u0445 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"required-mark\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navigation-buttons\",\n        children: [currentQuestionIndex > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"secondary-button\",\n          onClick: prevQuestion,\n          children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 13\n        }, this), !isLastQuestion ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-button\",\n          onClick: nextQuestion,\n          children: \"\\u0414\\u0430\\u043B\\u0435\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: isPreview ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button\",\n            onClick: () => navigate(\"/dashboard\"),\n            children: \"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u043F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button\",\n            onClick: submitSurvey,\n            disabled: submitting,\n            children: submitting ? \"Отправка...\" : \"Завершить опрос\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 356,\n    columnNumber: 5\n  }, this);\n};\n_s(SurveyPage, \"EBzFATV1AcaE+Fl2sq5/nI1vfIM=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = SurveyPage;\nexport default SurveyPage;\nvar _c;\n$RefreshReg$(_c, \"SurveyPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useLocation","surveyService","authService","jsxDEV","_jsxDEV","Fragment","_Fragment","SurveyPage","_s","id","navigate","location","isPreview","setIsPreview","survey","setSurvey","loading","setLoading","error","setError","currentQuestionIndex","setCurrentQuestionIndex","answers","setAnswers","submitting","setSubmitting","submitted","setSubmitted","respondentData","setRespondentData","email","consent","checkIfPreview","user","getCurrentUser","isAdmin","role","fetchSurvey","surveyData","getSurveyById","getPublicSurveyById","console","log","status","initialAnswers","questions","forEach","question","required","type","err","handleAnswerChange","questionId","value","find","q","currentAnswers","includes","filter","item","handleRespondentDataChange","e","name","checked","target","nextQuestion","currentQuestion","answer","undefined","Array","isArray","length","trim","alert","window","scrollTo","prevQuestion","validateForm","unansweredRequired","some","submitSurvey","surveyResponse","surveyId","respondent","Object","entries","map","parseInt","submitSurveyResponse","renderQuestionContent","className","children","options","option","index","onChange","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","rows","rating","onClick","isLastQuestion","title","description","style","width","text","htmlFor","disabled","_c","$RefreshReg$"],"sources":["/Users/shirokiy/Desktop/Repositories/Дипломы/ClientExp/client_exp-frontend/src/pages/Survey/SurveyPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\"\nimport { surveyService } from \"../../api/survey\"\nimport { authService } from \"../../api/auth\"\nimport \"./SurveyStyles.css\"\n\nconst SurveyPage = () => {\n  const { id } = useParams()\n  const navigate = useNavigate()\n  const location = useLocation()\n  const [isPreview, setIsPreview] = useState(false)\n\n  const [survey, setSurvey] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)\n  const [answers, setAnswers] = useState({})\n  const [submitting, setSubmitting] = useState(false)\n  const [submitted, setSubmitted] = useState(false)\n  const [respondentData, setRespondentData] = useState({\n    email: \"\",\n    consent: false,\n  })\n\n  useEffect(() => {\n    // Проверяем, является ли это предпросмотром от администратора\n    const checkIfPreview = async () => {\n      const user = authService.getCurrentUser()\n      const isAdmin = user && (user.role === \"ADMIN\" || user.role === \"MANAGER\")\n      setIsPreview(isAdmin)\n      fetchSurvey(isAdmin)\n    }\n\n    checkIfPreview()\n  }, [id])\n\n  const fetchSurvey = async isAdmin => {\n    try {\n      setLoading(true)\n\n      // Выбор метода API в зависимости от того, предпросмотр это или нет\n      let surveyData\n\n      // Если это предпросмотр администратора, используем метод с авторизацией\n      if (isAdmin) {\n        surveyData = await surveyService.getSurveyById(id)\n      } else {\n        surveyData = await surveyService.getPublicSurveyById(id)\n      }\n\n      console.log(\"Получены данные опросника:\", surveyData)\n\n      if (!surveyData) {\n        setError(\"Опросник не найден или недоступен\")\n        setLoading(false)\n        return\n      }\n\n      // Проверка статуса нужна только если это не предпросмотр\n      if (\n        !isAdmin &&\n        surveyData.status !== \"ACTIVE\" &&\n        surveyData.status !== \"активный\"\n      ) {\n        setError(\n          `Опросник в данный момент недоступен (статус: ${surveyData.status})`\n        )\n        setLoading(false)\n        return\n      }\n\n      setSurvey(surveyData)\n\n      // Инициализируем ответы для обязательных вопросов\n      const initialAnswers = {}\n      surveyData.questions.forEach(question => {\n        if (question.required) {\n          initialAnswers[question.id] =\n            question.type === \"MULTIPLE_CHOICE\"\n              ? []\n              : question.type === \"TEXT\"\n              ? \"\"\n              : null\n        }\n      })\n      setAnswers(initialAnswers)\n\n      setLoading(false)\n    } catch (err) {\n      console.error(\"Ошибка при загрузке опросника:\", err)\n      setError(\n        \"Не удалось загрузить опросник. Возможно, он был удален или недоступен.\"\n      )\n      setLoading(false)\n    }\n  }\n\n  const handleAnswerChange = (questionId, value) => {\n    const question = survey.questions.find(q => q.id === questionId)\n\n    if (question.type === \"MULTIPLE_CHOICE\") {\n      const currentAnswers = answers[questionId] || []\n\n      if (currentAnswers.includes(value)) {\n        // Если значение уже выбрано, удаляем его\n        setAnswers({\n          ...answers,\n          [questionId]: currentAnswers.filter(item => item !== value),\n        })\n      } else {\n        // Иначе добавляем новое значение\n        setAnswers({\n          ...answers,\n          [questionId]: [...currentAnswers, value],\n        })\n      }\n    } else {\n      // Для одиночного выбора, текста и оценки\n      setAnswers({\n        ...answers,\n        [questionId]: value,\n      })\n    }\n  }\n\n  const handleRespondentDataChange = e => {\n    const { name, value, type, checked } = e.target\n    setRespondentData({\n      ...respondentData,\n      [name]: type === \"checkbox\" ? checked : value,\n    })\n  }\n\n  const nextQuestion = () => {\n    const currentQuestion = survey.questions[currentQuestionIndex]\n\n    // Проверяем, дан ли ответ на обязательный вопрос\n    if (currentQuestion.required) {\n      const answer = answers[currentQuestion.id]\n      if (\n        answer === null ||\n        answer === undefined ||\n        (Array.isArray(answer) && answer.length === 0) ||\n        (typeof answer === \"string\" && answer.trim() === \"\")\n      ) {\n        alert(\"Пожалуйста, ответьте на вопрос, прежде чем продолжить.\")\n        return\n      }\n    }\n\n    if (currentQuestionIndex < survey.questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1)\n      window.scrollTo(0, 0)\n    }\n  }\n\n  const prevQuestion = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1)\n      window.scrollTo(0, 0)\n    }\n  }\n\n  const validateForm = () => {\n    // Проверяем, есть ли ответы на все обязательные вопросы\n    const unansweredRequired = survey.questions\n      .filter(q => q.required)\n      .some(q => {\n        const answer = answers[q.id]\n        return (\n          answer === null ||\n          answer === undefined ||\n          (Array.isArray(answer) && answer.length === 0) ||\n          (typeof answer === \"string\" && answer.trim() === \"\")\n        )\n      })\n\n    if (unansweredRequired) {\n      alert(\"Пожалуйста, ответьте на все обязательные вопросы.\")\n      return false\n    }\n\n    // Проверяем согласие на обработку данных\n    if (!respondentData.consent) {\n      alert(\"Для завершения опроса необходимо согласие на обработку данных.\")\n      return false\n    }\n\n    return true\n  }\n\n  const submitSurvey = async () => {\n    if (!validateForm()) return\n\n    try {\n      setSubmitting(true)\n\n      const surveyResponse = {\n        surveyId: survey.id,\n        respondent: {\n          email: respondentData.email || \"anonymous\",\n          consent: respondentData.consent,\n        },\n        answers: Object.entries(answers).map(([questionId, value]) => ({\n          questionId: parseInt(questionId),\n          answer: value,\n        })),\n      }\n\n      console.log(\"Отправка ответов:\", surveyResponse)\n      await surveyService.submitSurveyResponse(surveyResponse)\n\n      setSubmitted(true)\n      window.scrollTo(0, 0)\n    } catch (err) {\n      console.error(\"Ошибка при отправке ответов:\", err)\n      alert(\n        \"Произошла ошибка при отправке ответов. Пожалуйста, попробуйте еще раз.\"\n      )\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const renderQuestionContent = question => {\n    switch (question.type) {\n      case \"SINGLE_CHOICE\":\n        return (\n          <div className=\"question-options\">\n            {question.options.map((option, index) => (\n              <label key={index} className=\"option-label\">\n                <input\n                  type=\"radio\"\n                  name={`question_${question.id}`}\n                  value={option}\n                  checked={answers[question.id] === option}\n                  onChange={() => handleAnswerChange(question.id, option)}\n                />\n                <span>{option}</span>\n              </label>\n            ))}\n          </div>\n        )\n\n      case \"MULTIPLE_CHOICE\":\n        return (\n          <div className=\"question-options\">\n            {question.options.map((option, index) => (\n              <label key={index} className=\"option-label\">\n                <input\n                  type=\"checkbox\"\n                  name={`question_${question.id}_${index}`}\n                  value={option}\n                  checked={(answers[question.id] || []).includes(option)}\n                  onChange={() => handleAnswerChange(question.id, option)}\n                />\n                <span>{option}</span>\n              </label>\n            ))}\n          </div>\n        )\n\n      case \"TEXT\":\n        return (\n          <div className=\"question-text\">\n            <textarea\n              className=\"text-answer\"\n              value={answers[question.id] || \"\"}\n              onChange={e => handleAnswerChange(question.id, e.target.value)}\n              placeholder=\"Введите ваш ответ здесь...\"\n              rows={5}\n            />\n          </div>\n        )\n\n      case \"RATING\":\n        return (\n          <div className=\"rating-container\">\n            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(rating => (\n              <button\n                key={rating}\n                className={`rating-button ${\n                  answers[question.id] === rating ? \"selected\" : \"\"\n                }`}\n                onClick={() => handleAnswerChange(question.id, rating)}\n              >\n                {rating}\n              </button>\n            ))}\n            <div className=\"rating-labels\">\n              <span>Очень плохо</span>\n              <span>Отлично</span>\n            </div>\n          </div>\n        )\n\n      default:\n        return <p>Неподдерживаемый тип вопроса.</p>\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"loading-indicator\">Загрузка опросника...</div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"error-message\">\n          <h2>Ошибка</h2>\n          <p>{error}</p>\n          <button className=\"back-button\" onClick={() => navigate(\"/\")}>\n            Вернуться на главную\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  if (!survey) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"error-message\">\n          <h2>Опросник не найден</h2>\n          <button className=\"back-button\" onClick={() => navigate(\"/\")}>\n            Вернуться на главную\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  if (submitted) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"success-message\">\n          <div className=\"success-icon\">✓</div>\n          <h2>Спасибо за участие в опросе!</h2>\n          <p>Ваши ответы помогут нам улучшить наш сервис.</p>\n          <button className=\"primary-button\" onClick={() => navigate(\"/\")}>\n            На главную\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  const currentQuestion = survey.questions[currentQuestionIndex]\n  const isLastQuestion = currentQuestionIndex === survey.questions.length - 1\n\n  return (\n    <div className=\"survey-container\">\n      {isPreview && (\n        <div className=\"preview-notification\">\n          Вы просматриваете опрос в режиме предпросмотра\n          <button\n            className=\"back-to-dashboard\"\n            onClick={() => navigate(\"/dashboard\")}\n          >\n            Вернуться в панель управления\n          </button>\n        </div>\n      )}\n\n      <header className=\"survey-header\">\n        <h1>{survey.title}</h1>\n        {survey.description && (\n          <p className=\"survey-description\">{survey.description}</p>\n        )}\n      </header>\n\n      <main className=\"survey-content\">\n        <div className=\"progress-bar\">\n          <div\n            className=\"progress-fill\"\n            style={{\n              width: `${\n                ((currentQuestionIndex + 1) / survey.questions.length) * 100\n              }%`,\n            }}\n          ></div>\n        </div>\n        <div className=\"progress-text\">\n          Вопрос {currentQuestionIndex + 1} из {survey.questions.length}\n        </div>\n\n        <div className=\"question-card\">\n          <h2 className=\"question-text\">\n            {currentQuestion.text}\n            {currentQuestion.required && (\n              <span className=\"required-mark\">*</span>\n            )}\n          </h2>\n\n          {renderQuestionContent(currentQuestion)}\n        </div>\n\n        {isLastQuestion && !isPreview && (\n          <div className=\"respondent-form\">\n            <h3>Завершение опроса</h3>\n            <p className=\"form-note\">\n              Оставьте свой email, если хотите получать информацию о наших\n              услугах.\n            </p>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email\">Email:</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={respondentData.email}\n                onChange={handleRespondentDataChange}\n                placeholder=\"example@mail.ru\"\n              />\n            </div>\n\n            <div className=\"form-group checkbox-group\">\n              <input\n                type=\"checkbox\"\n                id=\"consent\"\n                name=\"consent\"\n                checked={respondentData.consent}\n                onChange={handleRespondentDataChange}\n                required\n              />\n              <label htmlFor=\"consent\">\n                Я даю согласие на обработку моих персональных данных{\" \"}\n                <span className=\"required-mark\">*</span>\n              </label>\n            </div>\n          </div>\n        )}\n\n        <div className=\"navigation-buttons\">\n          {currentQuestionIndex > 0 && (\n            <button className=\"secondary-button\" onClick={prevQuestion}>\n              Назад\n            </button>\n          )}\n\n          {!isLastQuestion ? (\n            <button className=\"primary-button\" onClick={nextQuestion}>\n              Далее\n            </button>\n          ) : (\n            <>\n              {isPreview ? (\n                <button\n                  className=\"primary-button\"\n                  onClick={() => navigate(\"/dashboard\")}\n                >\n                  Завершить предпросмотр\n                </button>\n              ) : (\n                <button\n                  className=\"primary-button\"\n                  onClick={submitSurvey}\n                  disabled={submitting}\n                >\n                  {submitting ? \"Отправка...\" : \"Завершить опрос\"}\n                </button>\n              )}\n            </>\n          )}\n        </div>\n      </main>\n    </div>\n  )\n}\n\nexport default SurveyPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}